############################
# Expanded Traits events
# by Scarecrow
############################

namespace = expanded_traits

event = {
	id = expanded_traits.1
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		every_country = {
			if = {
				limit = { 
					AND = {
						has_trait = "trait_virtualists" 
						NOT = { has_modifier = extraits_virtualists }
					}
				}
				add_modifier = {
					modifier = extraits_virtualists
					days = -1
				}
			}	
			if = {
				limit = { 
					AND = {
						has_trait = "trait_politically_adept" 
						NOT = { has_modifier = extraits_pol_adept }
					}
				}
				add_modifier = {
					modifier = extraits_pol_adept
					days = -1
				}
			}
			if = {
				limit = { 
					AND = {
						has_trait = "trait_natural_architects" 
						NOT = { has_modifier = extraits_natural_architects }
					}
				}
				add_modifier = {
					modifier = extraits_natural_architects
					days = -1
				}
			}
			if = {
				limit = { 
					AND = {
						has_trait = "trait_incompetent_architects" 
						NOT = { has_modifier = extraits_incompetent_architects }
					}
				}
				add_modifier = {
					modifier = extraits_incompetent_architects
					days = -1
				}
			}
			if = {
				limit = {
					AND = {
						has_trait = "trait_scavengers"
						NOT = { has_modifier = extraits_scavengers }
					}
				}
				add_modifier = {
					modifier = extraits_scavengers
					days = -1
				}
			}
			if = {
				limit = {
					AND = {
						has_trait = "trait_spaceborn"
						NOT = { has_modifier = extraits_spaceborn }
					}
				}
				add_modifier = {
					modifier = extraits_spaceborn
					days = -1
				}
			}
			if = {
				limit = {
					AND = {
						has_trait = "trait_relic_of_the_past"
						NOT = { has_modifier = extraits_relic_of_the_past }
					}
				}
				add_modifier = {
					modifier = extraits_relic_of_the_past
					days = -1
				}
			}
			if = {
				limit = {
					AND = {
						has_trait = "trait_quick_reflexes"
						NOT = { has_modifier = extraits_quick_reflexes }
					}
				}
				add_modifier = {
					modifier = extraits_quick_reflexes
					days = -1
				}
			}
			if = {
				limit = {
					AND = {
						has_trait = "trait_epimorphosis"
						NOT = { has_modifier = extraits_epimorphosis }
					}
				}
				add_modifier = {
					modifier = extraits_epimorphosis
					days = -1
				}
			}
		}
	}
}

#  Remove trait bonuses if no trait
event = {
	id = expanded_traits.2
	hide_window = yes
	is_triggered_only = yes
	immediate = {
		every_country = {
			if = {
				limit = {
					AND = {
						has_modifier = extraits_scavengers
						NOT = { has_trait = "trait_scavengers" }
					}
				}
				remove_modifier = extraits_scavengers
			}
			if = {
				limit = {
					AND = {
						has_modifier = extraits_spaceborn
						NOT = { has_trait = "trait_spaceborn" }
					}
				}
				remove_modifier = extraits_spaceborn
			}
			if = {
				limit = {
					AND = {
						has_modifier = extraits_relic_of_the_past
						NOT = { has_trait = "trait_relic_of_the_past" }
					}
				}
				remove_modifier = extraits_relic_of_the_past
			}
			if = {
				limit = {
					AND = {
						has_modifier = extraits_quick_reflexes
						NOT = { has_trait = "trait_quick_reflexes" }
					}
				}
				remove_modifier = extraits_quick_reflexes
			}
			if = {
				limit = {
					AND = {
						has_modifier = extraits_epimorphosis
						NOT = { has_trait = "trait_epimorphosis" }
					}
				}
				remove_modifier = extraits_epimorphosis
			}
		}
	}
}

event = {
	id = expanded_traits.3
    hide_window = yes
    is_triggered_only = yes

	immediate = {
		every_country = {
			limit = {
				is_ai = no
				has_trait = "trait_voices_in_the_dark"
			}
			every_owned_leader = {
				limit = {
					leader_class = scientist
					NOT = { has_trait = leader_trait_expertise_psionics }
				}
				add_trait = leader_trait_expertise_psionics
			}
		}
	}
}