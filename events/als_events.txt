namespace = als

###STOLEN AND EDITED FROM LEADER_EVENTS_1###

# Trickster gained from Victory
country_event = {
	id = als.1
	title = "admiral_trait_gain"
	desc = {
		trigger = { has_authority = auth_hive_mind }
		text = "leader.newadmiraltrait.desc.hive"
	}
	desc = {
		trigger = { has_authority = auth_machine_intelligence }
		text = "leader.newadmiraltrait.desc.machine"
	}
	desc = {
		trigger = {
			NOR = {
				has_authority = auth_hive_mind
				has_authority = auth_machine_intelligence
			}
		}
		text = "leader.5.desc"
	}
	picture = GFX_evt_federation_fleet
	location = ROOT
	
	is_triggered_only = yes
	
	trigger = {
		is_country_type = default
		FROMFROM = {
			exists = leader
			leader = {
				leader_class = admiral
				num_traits < 9
				NOT = { 
					has_trait = leader_trait_trickster 
					has_trait = leader_trait_unyielding
				}
			}
		}
	}
	
	immediate = {
		FROMFROM = {
			leader = { save_event_target_as = officer }
			solar_system = { save_event_target_as = system }
		}
	}
	
	option = {
		name = GOOD
		FROMFROM = {
			leader = { add_trait = leader_trait_trickster }
		}		
	}
}


# Aggressive gained from Victory
country_event = {
	id = als.2
	title = "admiral_trait_gain"
	desc = {
		trigger = { has_authority = auth_hive_mind }
		text = "leader.newadmiraltrait.desc.hive"
	}
	desc = {
		trigger = { has_authority = auth_machine_intelligence }
		text = "leader.newadmiraltrait.desc.machine"
	}
	desc = {
		trigger = {
			NOR = {
				has_authority = auth_hive_mind
				has_authority = auth_machine_intelligence
			}
		}
		text = "leader.6.desc"
	}
	picture = GFX_evt_federation_fleet
	location = FROMFROM
	
	is_triggered_only = yes
	
	trigger = {
		is_country_type = default
		FROMFROM = {
			exists = leader
			leader = {
				leader_class = admiral
				num_traits < 9
				NOT = { 
					has_trait = leader_trait_cautious 
					has_trait = leader_trait_aggressive
				}
			}
		}
	}
	
	immediate = {
		FROMFROM = {
			leader = { save_event_target_as = officer }
			solar_system = { save_event_target_as = system }
		}
	}
	
	option = {
		name = GOOD
		FROMFROM = {
			leader = { add_trait = leader_trait_aggressive }
		}		
	}
}
# Unyielding gained from Victory
country_event = {
	id = als.3
	title = "admiral_trait_gain"
	desc = {
		trigger = { has_authority = auth_hive_mind }
		text = "leader.newadmiraltrait.desc.hive"
	}
	desc = {
		trigger = { has_authority = auth_machine_intelligence }
		text = "leader.newadmiraltrait.desc.machine"
	}
	desc = {
		trigger = {
			NOR = {
				has_authority = auth_hive_mind
				has_authority = auth_machine_intelligence
			}
		}
		text = "leader.7.desc"
	}
	picture = GFX_evt_federation_fleet
	location = FROMFROM
	
	is_triggered_only = yes
	
	trigger = {
		is_country_type = default
		FROMFROM = {
			exists = leader
			leader = {
				leader_class = admiral
				num_traits < 9
				NOT = { 
					has_trait = leader_trait_trickster
					has_trait = leader_trait_unyielding
				}
			}
		}
	}
	
	immediate = {
		FROMFROM = {
			leader = { save_event_target_as = officer }
			solar_system = { save_event_target_as = system }
		}
	}
	
	option = {
		name = GOOD
		FROMFROM = {
			leader = { add_trait = leader_trait_unyielding }
		}		
	}
}

# Gale Speed gained from Victory
country_event = {
	id = als.4
	title = "admiral_trait_gain"
	desc = {
		trigger = { has_authority = auth_hive_mind }
		text = "leader.newadmiraltrait.desc.hive"
	}
	desc = {
		trigger = { has_authority = auth_machine_intelligence }
		text = "leader.newadmiraltrait.desc.machine"
	}
	desc = {
		trigger = {
			NOR = {
				has_authority = auth_hive_mind
				has_authority = auth_machine_intelligence
			}
		}
		text = "leader.8.desc"
	}
	picture = GFX_evt_federation_fleet
	location = FROMFROM
	
	is_triggered_only = yes
	
	trigger = {
		is_country_type = default
		FROMFROM = {
			exists = leader
			leader = {
				leader_class = admiral
				num_traits < 9
				NOT = { 
					has_trait = leader_trait_lethargic
					has_trait = leader_trait_gale_speed
				}
			}
		}
	}
	
	immediate = {
		FROMFROM = {
			leader = { save_event_target_as = officer }
			solar_system = { save_event_target_as = system }
		}
	}
	
	option = {
		name = GOOD
		FROMFROM = {
			leader = { add_trait = leader_trait_gale_speed }
		}		
	}
}

# Lethargic lost from Victory
country_event = {
	id = als.5
	title = "admiral_trait_loss"
	desc = {
		trigger = { has_authority = auth_hive_mind }
		text = "leader.lostadmiraltrait.desc.hive"
	}
	desc = {
		trigger = { has_authority = auth_machine_intelligence }
		text = "leader.lostadmiraltrait.desc.machine"
	}
	desc = {
		trigger = {
			NOR = {
				has_authority = auth_hive_mind
				has_authority = auth_machine_intelligence
			}
		}
		text = "leader.9.desc"
	}
	picture = GFX_evt_federation_fleet
	location = FROMFROM
	
	is_triggered_only = yes
	
	trigger = {
		is_country_type = default
		FROMFROM = {
			exists = leader
			leader = { has_trait = leader_trait_lethargic }
		}
	}
	
	immediate = {
		FROMFROM = {
			leader = { save_event_target_as = officer }
			solar_system = { save_event_target_as = system }
		}
	}
	
	option = {
		name = GOOD
		FROMFROM = {
			leader = { remove_trait = leader_trait_lethargic }
		}		
	}
}

# Cautious gained from Defeat
fleet_event = {
	id = als.6
	title = "admiral_trait_gain"
	desc = {
		trigger = { owner = { has_authority = auth_hive_mind } }
		text = "leader.newadmiraltrait.desc.hive"
	}
	desc = {
		trigger = { owner = { has_authority = auth_machine_intelligence } }
		text = "leader.newadmiraltrait.desc.machine"
	}
	desc = {
		trigger = {
			owner = {
				NOR = {
					has_authority = auth_hive_mind
					has_authority = auth_machine_intelligence
				}
			}
		}
		text = "leader.10.desc"
	}
	picture = GFX_evt_federation_fleet
	location = ROOT
	
	is_triggered_only = yes
	
	trigger = {
		owner = { is_country_type = default }
		exists = leader
		leader = {
			leader_class = admiral
			num_traits < 9
			NOT = { 
				has_trait = leader_trait_cautious 
				has_trait = leader_trait_aggressive
			}
		}
	}
	
	immediate = {
		leader = { save_event_target_as = officer }
		solar_system = { save_event_target_as = system }
	}
	
	option = {
		name = GOOD
		leader = { add_trait = leader_trait_cautious }	
	}
}
###DEFEAT###
# Nervous gained from Defeat
fleet_event = {
	id = als.9000
	title = "admiral_trait_gain"
	desc = {
		trigger = { owner = { has_authority = auth_hive_mind } }
		text = "leader.newadmiraltrait.desc.hive"
	}
	desc = {
		trigger = { owner = { has_authority = auth_machine_intelligence } }
		text = "leader.newadmiraltrait.desc.machine"
	}
	desc = {
		trigger = {
			owner = {
				NOR = {
					has_authority = auth_hive_mind
					has_authority = auth_machine_intelligence
				}
			}
		}
		text = "leader.11.desc"
	}
	picture = GFX_evt_federation_fleet
	location = ROOT
	
	is_triggered_only = yes
	
	trigger = {
		owner = { is_country_type = default }
		exists = leader
		owner = { has_technology = tech_doctrine_fleet_size_2 }
		leader = {
			num_traits < 3
			NOT = { 
				has_trait = leader_trait_fleet_organizer
				has_trait = leader_trait_unyielding
				has_trait = leader_trait_nervous
			}
		}
	}
	
	immediate = {
		leader = { save_event_target_as = officer }
		solar_system = { save_event_target_as = system }
	}
	
	option = {
		name = UNFORTUNATE
		if = {
			limit = {
				owner = { 
					NOT = { has_authority = "auth_machine_intelligence" }
				}
			}
			leader = { add_trait = leader_trait_nervous }	
		}
		if = {
			limit = {
				owner = { has_authority = "auth_machine_intelligence" }
			}
			leader = { add_trait = leader_trait_unstable_code_base }	
		}
	}
}
###
# Unyielding gained from Defeat
fleet_event = {
	id = als.7
	title = "admiral_trait_gain"
	desc = {
		trigger = { owner = { has_authority = auth_hive_mind } }
		text = "leader.newadmiraltrait.desc.hive"
	}
	desc = {
		trigger = { owner = { has_authority = auth_machine_intelligence } }
		text = "leader.newadmiraltrait.desc.machine"
	}
	desc = {
		trigger = {
			owner = {
				NOR = {
					has_authority = auth_hive_mind
					has_authority = auth_machine_intelligence
				}
			}
		}
		text = "leader.12.desc"
	}
	picture = GFX_evt_federation_fleet
	location = ROOT
	
	is_triggered_only = yes
	
	trigger = {
		owner = { is_country_type = default }
		exists = leader
		leader = {
			leader_class = admiral
			num_traits < 9
			NOT = { 
				has_trait = leader_trait_unyielding
			}
		}
	}
	
	immediate = {
		leader = { save_event_target_as = officer }
		solar_system = { save_event_target_as = system }
	}
	
	option = {
		name = GOOD
		leader = { add_trait = leader_trait_unyielding }	
	}
}

# Gale Speed gained from Defeat
fleet_event = {
	id = als.8
	title = "admiral_trait_gain"
	desc = {
		trigger = { owner = { has_authority = auth_hive_mind } }
		text = "leader.newadmiraltrait.desc.hive"
	}
	desc = {
		trigger = { owner = { has_authority = auth_machine_intelligence } }
		text = "leader.newadmiraltrait.desc.machine"
	}
	desc = {
		trigger = {
			NOR = {
				has_authority = auth_hive_mind
				has_authority = auth_machine_intelligence
			}
		}
		text = "leader.13.desc"
	}
	picture = GFX_evt_federation_fleet
	location = ROOT
	
	is_triggered_only = yes
	
	trigger = {
		owner = { is_country_type = default }
		exists = leader
		leader = {
			leader_class = admiral
			num_traits < 9
			NOT = { 
				has_trait = leader_trait_lethargic
				has_trait = leader_trait_gale_speed
			}
		}
	}
	
	immediate = {
		leader = { save_event_target_as = officer }
		solar_system = { save_event_target_as = system }
	}
	
	option = {
		name = GOOD
		leader = { add_trait = leader_trait_gale_speed }	
	}
}

# Lethargic gained from Defeat
fleet_event = {
	id = als.9
	title = "admiral_trait_gain"
	desc = {
		trigger = { owner = { has_authority = auth_hive_mind } }
		text = "leader.newadmiraltrait.desc.hive"
	}
	desc = {
		trigger = { owner = { has_authority = auth_machine_intelligence } }
		text = "leader.newadmiraltrait.desc.machine"
	}
	desc = {
		trigger = {
			NOR = {
				has_authority = auth_hive_mind
				has_authority = auth_machine_intelligence
			}
		}
		text = "leader.14.desc"
	}
	picture = GFX_evt_federation_fleet
	location = ROOT
	
	is_triggered_only = yes
	
	trigger = {
		owner = { is_country_type = default }
		exists = leader
		leader = {
			leader_class = admiral
			num_traits < 9
			NOT = { 
				has_trait = leader_trait_gale_speed
				has_trait = leader_trait_lethargic
			}
		}
	}
	
	immediate = {
		leader = { save_event_target_as = officer }
		solar_system = { save_event_target_as = system }
	}
	
	option = {
		name = UNFORTUNATE
		leader = { add_trait = leader_trait_lethargic }	
	}
}

# Engineer gained from Repairing
fleet_event = {
	id = als.10
	title = "admiral_trait_gain"
	desc = {
		trigger = { owner = { has_authority = auth_hive_mind } }
		text = "leader.optimizations.desc.hive"
	}
	desc = {
		trigger = { owner = { has_authority = auth_machine_intelligence } }
		text = "leader.optimizations.desc.machine"
	}
	desc = {
		trigger = {
			NOR = {
				has_authority = auth_hive_mind
				has_authority = auth_machine_intelligence
			}
		}
		text = "leader.15.desc"
	}
	picture = GFX_evt_federation_fleet
	location = ROOT
	
	trigger = {
		owner = {
			is_country_type = default
			has_technology = tech_doctrine_fleet_size_3
			NOT = { has_ethic = ethic_gestalt_consciousness }
		}
		is_being_repaired = yes
		exists = leader
		leader = {
			leader_class = admiral
			num_traits < 9
			NOT = { has_trait = leader_trait_engineer }
		}
	}
	
	mean_time_to_happen = {
		months = 120
	}
	
	immediate = {
		leader = { save_event_target_as = officer }
	}
	
	option = {
		name = GOOD
		leader = { add_trait = leader_trait_engineer }	
	}
}
###NERVOUS LOST###
# Nervous lost from Victory
country_event = {
	id = als.9001
	title = "admiral_trait_loss"
	desc = {
		trigger = { has_authority = auth_hive_mind }
		text = "leader.lostadmiraltrait.desc.hive"
	}
	desc = {
		trigger = { has_authority = auth_machine_intelligence }
		text = "leader.lostadmiraltrait.desc.machine"
	}
	desc = {
		trigger = {
			NOR = {
				has_authority = auth_hive_mind
				has_authority = auth_machine_intelligence
			}
		}
		text = "leader.17.desc"
	}
	picture = GFX_evt_federation_fleet
	location = FROMFROM
	
	is_triggered_only = yes
	
	trigger = {
		is_country_type = default
		FROMFROM = {
			exists = leader
			leader = { 
				OR = {
					has_trait = leader_trait_nervous
					has_trait = leader_trait_unstable_code_base
				}
			}
		}
	}
	
	immediate = {
		FROMFROM = {
			leader = { save_event_target_as = officer }
			solar_system = { save_event_target_as = system }
		}
	}
	
	option = {
		name = GOOD
		FROMFROM = {
			if = {
				limit = {
					owner = { 
						NOT = { has_authority = "auth_machine_intelligence" }
					}
				}
				leader = { remove_trait = leader_trait_nervous }
			}
			if = {
				limit = {
					owner = { has_authority = "auth_machine_intelligence" }
				}
				leader = { remove_trait = leader_trait_unstable_code_base }
			}
		}
	}
}
###
# Logistics gained from Large Fleet
fleet_event = {
	id = als.11
	title = "admiral_trait_gain"
	desc = {
		trigger = { owner = { has_authority = auth_hive_mind } }
		text = "leader.optimizations.desc.hive"
	}
	desc = {
		trigger = { owner = { has_authority = auth_machine_intelligence } }
		text = "leader.optimizations.desc.machine"
	}
	desc = {
		trigger = {
			owner = {
				NOR = {
					has_authority = auth_hive_mind
					has_authority = auth_machine_intelligence
				}
			}
		}
		text = "leader.18.desc"
	}
	picture = GFX_evt_federation_fleet
	location = ROOT
	
	trigger = {
		owner = {
			is_country_type = default
			NOT = { has_ethic = ethic_gestalt_consciousness }
		}
		exists = leader
		num_ships > 11
		leader = {
			leader_class = admiral
			num_traits < 9
			NOT = { has_trait = leader_trait_fleet_logistician }
		}
	}
	
	mean_time_to_happen = {
		months = 240
	}
	
	immediate = {
		leader = { save_event_target_as = officer }
	}
	
	option = {
		name = GOOD
		if = {
			limit = {
				owner = { 
					NOT = { has_authority = "auth_machine_intelligence" }
				}
			}
			leader = { add_trait = leader_trait_fleet_logistician }	
		}
		if = {
			limit = {
				owner = { has_authority = "auth_machine_intelligence" }
			}
			leader = { add_trait = leader_trait_maintenance_loop }	
		}
	}
}

# Scout gained from Exploration
ship_event = {
	id = als.12
	title = "admiral_trait_gain"
	desc = {
		trigger = { owner = { has_authority = auth_hive_mind } }
		text = "leader.optimizations.desc.hive"
	}
	desc = {
		trigger = { owner = { has_authority = auth_machine_intelligence } }
		text = "leader.optimizations.desc.machine"
	}
	desc = {
		trigger = {
			NOR = {
				has_authority = auth_hive_mind
				has_authority = auth_machine_intelligence
			}
		}
		text = "leader.19.desc"
	}
	picture = GFX_evt_federation_fleet
	location = ROOT
	
	is_triggered_only = yes
	
	trigger = {
		owner = {
			is_country_type = default
			NOT = { has_ethic = ethic_gestalt_consciousness }
		}
		fleet = {
			exists = leader
			num_ships > 1
			leader = {
				leader_class = admiral
				num_traits < 9
				NOT = { has_trait = leader_trait_scout }
			}
		}
	}
	
	immediate = {
		fleet = {
			leader = { save_event_target_as = officer }
			solar_system = { save_event_target_as = system }
		}
	}
	
	option = {
		name = GOOD
		fleet = {
			leader = { add_trait = leader_trait_scout  }
		}
	}
}
####SAVE GAME JUST IN CASE####
fleet_event = {
	id = als.19
	hide_window = yes

	trigger = {
		owner = {
			NOR = {
				is_country_type = swarm
				is_country_type = portal_holder
			}
		}
		exists = leader
		leader = {
			leader_class = admiral
			has_leader_flag = att_admiral
			NOR = {
				has_trait = att_trait_siege_lv0
				has_trait = att_trait_siege_lv1
				has_trait = att_trait_siege_lv2
				has_trait = att_trait_siege_lv3
				has_trait = att_trait_siege_lv4
				has_trait = att_trait_siege_lv5
				has_trait = att_trait_siege_max
			}
		}
	}
	
	mean_time_to_happen = {
		days = 5
	}
	
	immediate = {
		leader = {
			random_list = {
				50 = { add_trait = att_trait_siege_lv0 }
				30 = { add_trait = att_trait_siege_lv1 }
				10 = { add_trait = att_trait_siege_lv2 }
				10 = { add_trait = att_trait_siege_lv3 }
			}
			if = {
				limit = {
					has_trait = leader_trait_admiral_synthetic
					NOT = {
						has_trait = att_trait_siege_lv3
					}
				}
				remove_trait = att_trait_siege_lv0
				remove_trait = att_trait_siege_lv1
				remove_trait = att_trait_siege_lv2
				add_trait = att_trait_siege_lv3
			}
		}
	}
}

####GIVE ATT TRAITS###
fleet_event = {
	id = als.20
	title = als.20.name
	desc = als.20.desc
	hide_window = yes
	
	trigger = {
		owner = {
			NOR = {
#				is_country_type = swarm
				is_country_type = portal_holder
			}
		}
		exists = leader
		leader = {
			leader_class = admiral
			NOT = {
				has_leader_flag = att_admiral
			}
			NOR = {
				has_trait = att_trait_accuracy_lv0
				has_trait = att_trait_accuracy_lv1
				has_trait = att_trait_accuracy_lv2
				has_trait = att_trait_accuracy_lv3
				has_trait = att_trait_accuracy_lv4
				has_trait = att_trait_accuracy_lv5
				has_trait = att_trait_accuracy_max
				has_trait = att_trait_movement_lv0
				has_trait = att_trait_movement_lv1
				has_trait = att_trait_movement_lv2
				has_trait = att_trait_movement_lv3
				has_trait = att_trait_movement_lv4
				has_trait = att_trait_movement_lv5
				has_trait = att_trait_movement_max
				has_trait = att_trait_shock_lv0
				has_trait = att_trait_shock_lv1
				has_trait = att_trait_shock_lv1_a
				has_trait = att_trait_shock_lv2
				has_trait = att_trait_shock_lv2_a
				has_trait = att_trait_shock_lv3
				has_trait = att_trait_shock_lv3_a
				has_trait = att_trait_shock_lv4
				has_trait = att_trait_shock_lv4_a
				has_trait = att_trait_shock_lv5
				has_trait = att_trait_shock_lv5_a
				has_trait = att_trait_shock_max
				has_trait = att_trait_shock_max_a
				has_trait = att_trait_siege_lv0
				has_trait = att_trait_siege_lv1
				has_trait = att_trait_siege_lv2
				has_trait = att_trait_siege_lv3
				has_trait = att_trait_siege_lv4
				has_trait = att_trait_siege_lv5
				has_trait = att_trait_siege_max
			}
		}
	}
	
	mean_time_to_happen = {
		days = 5
	}
	
	immediate = {
		leader = {
			set_leader_flag = att_admiral
			random_list = {
				50 = { add_trait = att_trait_accuracy_lv0 }
				30 = { add_trait = att_trait_accuracy_lv1 }
				10 = { add_trait = att_trait_accuracy_lv2 }
				6 = { add_trait = att_trait_accuracy_lv3 }
				3 = { add_trait = att_trait_accuracy_lv4 }
				1 = { add_trait = att_trait_accuracy_lv5 }
			}
			random_list = {
				50 = { add_trait = att_trait_movement_lv0 }
				30 = { add_trait = att_trait_movement_lv1 }
				10 = { add_trait = att_trait_movement_lv2 }
				6 = { add_trait = att_trait_movement_lv3 }
				3 = { add_trait = att_trait_movement_lv4 }
				1 = { add_trait = att_trait_movement_lv5 }
			}
			random_list = {
				50 = { add_trait = att_trait_shock_lv0 }
				30 = { add_trait = att_trait_shock_lv1 }
				10 = { add_trait = att_trait_shock_lv2 }
				6 = { add_trait = att_trait_shock_lv3 }
				3 = { add_trait = att_trait_shock_lv4 }
				1 = { add_trait = att_trait_shock_lv5 }
			}
			random_list = {
				50 = { add_trait = att_trait_siege_lv0 }
				30 = { add_trait = att_trait_siege_lv1 }
				10 = { add_trait = att_trait_siege_lv2 }
				10 = { add_trait = att_trait_siege_lv3 }
			}
####IF YOUR ADMIRAL IS TERRIBLE####
			if = {
				limit = {
					NOR = {
						has_trait = att_trait_accuracy_lv1
						has_trait = att_trait_accuracy_lv2
						has_trait = att_trait_accuracy_lv3
						has_trait = att_trait_accuracy_lv4
						has_trait = att_trait_accuracy_lv5
						has_trait = att_trait_movement_lv1
						has_trait = att_trait_movement_lv2
						has_trait = att_trait_movement_lv3
						has_trait = att_trait_movement_lv4
						has_trait = att_trait_movement_lv5
						has_trait = att_trait_shock_lv1
						has_trait = att_trait_shock_lv2
						has_trait = att_trait_shock_lv3
						has_trait = att_trait_shock_lv4
						has_trait = att_trait_shock_lv5
					}
				}
				random_list = {
					33 = {
						remove_trait = att_trait_accuracy_lv0
						add_trait = att_trait_accuracy_lv1
					}
					33 = {
						remove_trait = att_trait_movement_lv0
						add_trait = att_trait_movement_lv1
					}
					33 = {
						remove_trait = att_trait_shock_lv0
						add_trait = att_trait_shock_lv1
					}
				}
			}
			if = {
				limit = {
					has_trait = leader_trait_admiral_cyborg
					NOR = {
						has_trait = att_trait_accuracy_lv3
						has_trait = att_trait_accuracy_lv4
						has_trait = att_trait_accuracy_lv5
					}
				}
				remove_trait = att_trait_accuracy_lv0
				remove_trait = att_trait_accuracy_lv1
				remove_trait = att_trait_accuracy_lv2
				remove_trait = att_trait_accuracy_lv3
				add_trait = att_trait_accuracy_lv2
			}
			if = {
				limit = {
					has_trait = leader_trait_admiral_synthetic
					NOR = {
						has_trait = att_trait_accuracy_lv4
						has_trait = att_trait_accuracy_lv5
					}
				}
				remove_trait = att_trait_accuracy_lv0
				remove_trait = att_trait_accuracy_lv1
				remove_trait = att_trait_accuracy_lv2
				add_trait = att_trait_accuracy_lv3
			}
			if = {
				limit = {
					has_trait = leader_trait_admiral_synthetic
					NOT = {
						has_trait = att_trait_siege_lv3
					}
				}
				remove_trait = att_trait_siege_lv0
				remove_trait = att_trait_siege_lv1
				remove_trait = att_trait_siege_lv2
				add_trait = att_trait_siege_lv3
			}
			if = {
				limit = {
					has_trait = leader_trait_admiral_psionic
					NOR = {
						has_trait = att_trait_movement_lv4
						has_trait = att_trait_movement_lv5
					}
				}
				remove_trait = att_trait_movement_lv0
				remove_trait = att_trait_movement_lv1
				remove_trait = att_trait_movement_lv2
				add_trait = att_trait_movement_lv3
			}
			if = {
				limit = {
					has_trait = leader_trait_admiral_psionic
					NOR = {
						has_trait = att_trait_shock_lv3
						has_trait = att_trait_shock_lv4
						has_trait = att_trait_shock_lv5
					}
				}
				remove_trait = att_trait_shock_lv0
				remove_trait = att_trait_shock_lv1
				remove_trait = att_trait_shock_lv2
				remove_trait = att_trait_shock_lv3
				add_trait = att_trait_shock_lv2
			}
		}
	}
}

###LEVEL UP ACCURACY FOR EVERY SHIP YOU DESTROY###
country_event = {
	id = als.21
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		fromfrom = {
			owner = {
				NOR = {
					is_country_type = swarm
					is_country_type = portal_holder
				}
			}
			exists = leader
			leader = {
				leader_class = admiral
				has_leader_flag = att_admiral
				OR = {
					has_trait = att_trait_accuracy_lv0
					has_trait = att_trait_accuracy_lv1
					has_trait = att_trait_accuracy_lv2
					has_trait = att_trait_accuracy_lv3
					has_trait = att_trait_accuracy_lv4
					has_trait = att_trait_accuracy_lv5
				}
			}
		}
	}

	immediate = {
		fromfrom = {
			leader = {
				if = {
					limit = {
						has_trait = att_trait_accuracy_lv0
					}
					random_list = {
						74 = { change_variable = { which = att_admiral_accuracy_exp value = 1 } }
						1 = {
							add_trait = att_trait_accuracy_lv1
							remove_trait = att_trait_accuracy_lv0
						}
					}
					if = {
						limit = {
							check_variable = { which = att_admiral_accuracy_exp value = 33 }
						}
						add_trait = att_trait_accuracy_lv1
						remove_trait = att_trait_accuracy_lv0
					}
					add_experience = 1
					break = yes
				}
				if = {
					limit = {
						has_trait = att_trait_accuracy_lv1
					}
					random_list = {
						149 = { change_variable = { which = att_admiral_accuracy_exp value = 1 } }
						1 = {
							add_trait = att_trait_accuracy_lv2
							remove_trait = att_trait_accuracy_lv1
						}
					}
					if = {
						limit = {
							check_variable = { which = att_admiral_accuracy_exp value = 75 }
						}
						add_trait = att_trait_accuracy_lv2
						remove_trait = att_trait_accuracy_lv1
					}
					add_experience = 1
					break = yes
				}
				if = {
					limit = {
						has_trait = att_trait_accuracy_lv2
					}
					random_list = {
						249 = { change_variable = { which = att_admiral_accuracy_exp value = 1 } }
						1 = {
							add_trait = att_trait_accuracy_lv3
							remove_trait = att_trait_accuracy_lv2
						}
					}
					if = {
						limit = {
							check_variable = { which = att_admiral_accuracy_exp value = 150 }
						}
						add_trait = att_trait_accuracy_lv3
						remove_trait = att_trait_accuracy_lv2
					}
					add_experience = 1
					break = yes
				}
				if = {
					limit = {
						has_trait = att_trait_accuracy_lv3
					}
					random_list = {
						499 = { change_variable = { which = att_admiral_accuracy_exp value = 1 } }
						1 = {
							add_trait = att_trait_accuracy_lv4
							remove_trait = att_trait_accuracy_lv3
						}
					}
					if = {
						limit = {
							check_variable = { which = att_admiral_accuracy_exp value = 300 }
						}
						add_trait = att_trait_accuracy_lv4
						remove_trait = att_trait_accuracy_lv3
					}
					add_experience = 1
					break = yes
				}
				if = {
					limit = {
						has_trait = att_trait_accuracy_lv4
					}
					random_list = {
						699 = { change_variable = { which = att_admiral_accuracy_exp value = 1 } }
						1 = {
							add_trait = att_trait_accuracy_lv5
							remove_trait = att_trait_accuracy_lv4
						}
					}
					if = {
						limit = {
							check_variable = { which = att_admiral_accuracy_exp value = 500 }
						}
						add_trait = att_trait_accuracy_lv5
						remove_trait = att_trait_accuracy_lv4
					}
					add_experience = 1
					break = yes
				}
				if = {
					limit = {
						has_trait = att_trait_accuracy_lv5
					}
					random_list = {
						749 = { change_variable = { which = att_admiral_accuracy_exp value = 1 } }
						1 = {
							add_trait = att_trait_accuracy_max
							remove_trait = att_trait_accuracy_lv5
						}
					}
					if = {
						limit = {
							check_variable = { which = att_admiral_accuracy_exp value = 1000 }
						}
						add_trait = att_trait_accuracy_max
						remove_trait = att_trait_accuracy_lv5
					}
					add_experience = 1
					break = yes
				}
			}	
		}
	}
}

###LEVEL UP SHOCK THROUGH UPON DESTROY HOSTILE FLEET######
country_event = {
	id = als.22
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		NOR = {
			is_country_type = swarm
			is_country_type = portal_holder
		}
		fromfrom = {
			exists = leader
			leader = {
				leader_class = admiral
				has_leader_flag = att_admiral
				OR = {
					has_trait = att_trait_shock_lv0
					has_trait = att_trait_shock_lv1
					has_trait = att_trait_shock_lv2
					has_trait = att_trait_shock_lv3
					has_trait = att_trait_shock_lv4
					has_trait = att_trait_shock_lv5
				}
			}		
		}
#		fromfromfrom = {
#			NOR = {
#				is_ship_size = mining_station
#				is_ship_size = research_station
#			}
#		}
	}

	immediate = {
		fromfrom = {
			leader = {
				if = {
					limit = {
						has_trait = att_trait_shock_lv0
					}
					random_list = {
						9 = {}
						1 = {
							add_trait = att_trait_shock_lv1
							remove_trait = att_trait_shock_lv0
						}
					}
					break = yes
				}
				if = {
					limit = {
						has_trait = att_trait_shock_lv1
					}
					random_list = {
						29 = {}
						1 = {
							add_trait = att_trait_shock_lv2
							remove_trait = att_trait_shock_lv1
						}
					}
					break = yes
				}
				if = {
					limit = {
						has_trait = att_trait_shock_lv2
					}
					random_list = {
						49 = {}
						1 = {
							add_trait = att_trait_shock_lv3
							remove_trait = att_trait_shock_lv2
						}
					}
					break = yes
				}
				if = {
					limit = {
						has_trait = att_trait_shock_lv3
					}
					random_list = {
						69 = {}
						1 = {
							add_trait = att_trait_shock_lv4
							remove_trait = att_trait_shock_lv3
						}
					}
					break = yes
				}
				if = {
					limit = {
						has_trait = att_trait_shock_lv4
					}
					random_list = {
						89 = {}
						1 = {
							add_trait = att_trait_shock_lv5
							remove_trait = att_trait_shock_lv4
						}
					}
					break = yes
				}
				if = {
					limit = {
						has_trait = att_trait_shock_lv5
					}
					random_list = {
						139 = {}
						1 = {
							add_trait = att_trait_shock_max
							remove_trait = att_trait_shock_lv5
						}
					}
					break = yes
				}
			}			
		}
	}
}
###LEVEL UP SHOCK THROUGH TIME######
#DISABLED in 2.0 since defensive ppl wont like it at all#
country_event = {
	id = als.23
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		NOR = {
			is_country_type = swarm
			is_country_type = portal_holder
		}
		any_owned_leader = {
			leader_class = admiral
			has_leader_flag = att_admiral
			OR = {
				has_trait = att_trait_shock_lv0
				has_trait = att_trait_shock_lv1
				has_trait = att_trait_shock_lv2
				has_trait = att_trait_shock_lv3
				has_trait = att_trait_shock_lv4
				has_trait = att_trait_shock_lv5
			}
		}		
	}

#	mean_time_to_happen = {
#		days = 30
#	}
	
	immediate = {
		random_owned_leader = {
			limit = {
				leader_class = admiral
				has_leader_flag = att_admiral
				OR = {
					has_trait = att_trait_shock_lv0
					has_trait = att_trait_shock_lv1
					has_trait = att_trait_shock_lv2
					has_trait = att_trait_shock_lv3
					has_trait = att_trait_shock_lv4
					has_trait = att_trait_shock_lv5
				}
			}
			if = {
				limit = {
					has_trait = att_trait_shock_lv0
				}
				random_list = {
					99 = {}
					1 = {
						add_trait = att_trait_shock_lv1
						remove_trait = att_trait_shock_lv0
					}
				}
				break = yes
			}
			if = {
				limit = {
					has_trait = att_trait_shock_lv1
				}
				random_list = {
					149 = {}
					1 = {
						add_trait = att_trait_shock_lv2
						remove_trait = att_trait_shock_lv1
					}
				}
				break = yes
			}
			if = {
				limit = {
					has_trait = att_trait_shock_lv2
				}
				random_list = {
					199 = {}
					1 = {
						add_trait = att_trait_shock_lv3
						remove_trait = att_trait_shock_lv2
					}
				}
				break = yes
			}
			if = {
				limit = {
					has_trait = att_trait_shock_lv3
				}
				random_list = {
					299 = {}
					1 = {
						add_trait = att_trait_shock_lv4
						remove_trait = att_trait_shock_lv3
					}
				}
				break = yes
			}
			if = {
				limit = {
					has_trait = att_trait_shock_lv4
				}
				random_list = {
					399 = {}
					1 = {
						add_trait = att_trait_shock_lv5
						remove_trait = att_trait_shock_lv4
					}
				}
				break = yes
			}
			if = {
				limit = {
					has_trait = att_trait_shock_lv5
				}
				random_list = {
					499 = {}
					1 = {
						add_trait = att_trait_shock_max
						remove_trait = att_trait_shock_lv5
					}
				}
				break = yes
			}
		}	
	}
}


###LEVEL UP MOVEMENT EVERYTIME ENTER SYSTEM###
ship_event = {
	id = als.24
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		fromfrom = {
			NOR = {
				is_country_type = swarm
				is_country_type = portal_holder
			}
		}
		exists = leader
		leader = {
			leader_class = admiral
			has_leader_flag = att_admiral
			NOT = {
				has_leader_flag = att_admiral_FTL_cooldown
			}
			OR = {
				has_trait = att_trait_movement_lv0
				has_trait = att_trait_movement_lv1
				has_trait = att_trait_movement_lv2
				has_trait = att_trait_movement_lv3
				has_trait = att_trait_movement_lv4
				has_trait = att_trait_movement_lv5
			}
		}
	}

	
	immediate = {
		leader = {		
			if = {
				limit = {
					has_trait = att_trait_movement_lv0
				}
				random_list = {
					799 = { change_variable = { which = att_admiral_movement_exp value = 0.1 } }
					1 = {
						add_trait = att_trait_movement_lv1
						remove_trait = att_trait_movement_lv0
						set_timed_leader_flag = { flag = att_admiral_FTL_cooldown days = 720 }
					}
				}
				if = {
					limit = {
						check_variable = { which = att_admiral_movement_exp value > 100 }
					}
					add_trait = att_trait_movement_lv1
					remove_trait = att_trait_movement_lv0
					set_timed_leader_flag = { flag = att_admiral_FTL_cooldown days = 720 }
				}
				break = yes
			}
			if = {
				limit = {
					has_trait = att_trait_movement_lv1
				}
				random_list = {
					1599 = { change_variable = { which = att_admiral_movement_exp value = 0.1 } }
					1 = {
						add_trait = att_trait_movement_lv2
						remove_trait = att_trait_movement_lv1
						set_timed_leader_flag = { flag = att_admiral_FTL_cooldown days = 720 }
					}
				}
				if = {
					limit = {
						check_variable = { which = att_admiral_movement_exp value > 200 }
					}
					add_trait = att_trait_movement_lv2
					remove_trait = att_trait_movement_lv1
					set_timed_leader_flag = { flag = att_admiral_FTL_cooldown days = 720 }
				}
				break = yes
			}
			if = {
				limit = {
					has_trait = att_trait_movement_lv2
				}
				random_list = {
					2999 = { change_variable = { which = att_admiral_movement_exp value = 0.1 } }
					1 = {
						add_trait = att_trait_movement_lv3
						remove_trait = att_trait_movement_lv2
						set_timed_leader_flag = { flag = att_admiral_FTL_cooldown days = 1080 }
					}
				}
				if = {
					limit = {
						check_variable = { which = att_admiral_movement_exp value > 400 }
					}
					add_trait = att_trait_movement_lv3
					remove_trait = att_trait_movement_lv2
					set_timed_leader_flag = { flag = att_admiral_FTL_cooldown days = 1080 }
				}
				break = yes
			}
			if = {
				limit = {
					has_trait = att_trait_movement_lv3
				}
				random_list = {
					5999 = { change_variable = { which = att_admiral_movement_exp value = 0.1 } }
					1 = {
						add_trait = att_trait_movement_lv4
						remove_trait = att_trait_movement_lv3
						set_timed_leader_flag = { flag = att_admiral_FTL_cooldown days = 1440 }
					}
				}
				if = {
					limit = {
						check_variable = { which = att_admiral_movement_exp value > 800 }
					}
					add_trait = att_trait_movement_lv4
					remove_trait = att_trait_movement_lv3
					set_timed_leader_flag = { flag = att_admiral_FTL_cooldown days = 1440 }
				}
				break = yes
			}
			if = {
				limit = {
					has_trait = att_trait_movement_lv4
				}
				random_list = {
					10999 = { change_variable = { which = att_admiral_movement_exp value = 0.1 } }
					1 = {
						add_trait = att_trait_movement_lv5
						remove_trait = att_trait_movement_lv4
						set_timed_leader_flag = { flag = att_admiral_FTL_cooldown days = 1800 }
					}
				}
				if = {
					limit = {
						check_variable = { which = att_admiral_movement_exp value > 1600 }
					}
					add_trait = att_trait_movement_lv5
					remove_trait = att_trait_movement_lv4
					set_timed_leader_flag = { flag = att_admiral_FTL_cooldown days = 1800 }
				}
				break = yes
			}
			if = {
				limit = {
					has_trait = att_trait_movement_lv5
				}
				random_list = {
					19999 = { change_variable = { which = att_admiral_movement_exp value = 0.1 } }
					1 = {
						add_trait = att_trait_movement_max
						remove_trait = att_trait_movement_lv5
						set_timed_leader_flag = { flag = att_admiral_FTL_cooldown days = 360 }
					}
				}
				if = {
					limit = {
						check_variable = { which = att_admiral_movement_exp value > 3200 }
					}
					add_trait = att_trait_movement_max
					remove_trait = att_trait_movement_lv5
					set_timed_leader_flag = { flag = att_admiral_FTL_cooldown days = 360 }
				}
				break = yes
			}
		}	
	}
}
###LEVEL UP MOVEMENT THROUGH TIME######
country_event = {
	id = als.25
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		NOR = {
			is_country_type = swarm
			is_country_type = portal_holder
		}
		any_owned_leader = {
			leader_class = admiral
			has_leader_flag = att_admiral
			OR = {
				has_trait = att_trait_movement_lv0
				has_trait = att_trait_movement_lv1
				has_trait = att_trait_movement_lv2
				has_trait = att_trait_movement_lv3
				has_trait = att_trait_movement_lv4
				has_trait = att_trait_movement_lv5
			}
		}		
	}

#	mean_time_to_happen = {
#		days = 30
#	}
	
	immediate = {
		random_owned_leader = {
			limit = {
				leader_class = admiral
				has_leader_flag = att_admiral
				OR = {
					has_trait = att_trait_movement_lv0
					has_trait = att_trait_movement_lv1
					has_trait = att_trait_movement_lv2
					has_trait = att_trait_movement_lv3
					has_trait = att_trait_movement_lv4
					has_trait = att_trait_movement_lv5
				}
			}
			if = {
				limit = {
					has_trait = att_trait_movement_lv0
				}
				random_list = {
					99 = {}
					1 = {
						add_trait = att_trait_movement_lv1
						remove_trait = att_trait_movement_lv0
					}
				}
				break = yes
			}
			if = {
				limit = {
					has_trait = att_trait_movement_lv1
				}
				random_list = {
					149 = {}
					1 = {
						add_trait = att_trait_movement_lv2
						remove_trait = att_trait_movement_lv1
					}
				}
				break = yes
			}
			if = {
				limit = {
					has_trait = att_trait_movement_lv2
				}
				random_list = {
					199 = {}
					1 = {
						add_trait = att_trait_movement_lv3
						remove_trait = att_trait_movement_lv2
					}
				}
				break = yes
			}
			if = {
				limit = {
					has_trait = att_trait_movement_lv3
				}
				random_list = {
					299 = {}
					1 = {
						add_trait = att_trait_movement_lv4
						remove_trait = att_trait_movement_lv3
					}
				}
				break = yes
			}
			if = {
				limit = {
					has_trait = att_trait_movement_lv4
				}
				random_list = {
					499 = {}
					1 = {
						add_trait = att_trait_movement_lv5
						remove_trait = att_trait_movement_lv4
					}
				}
				break = yes
			}
			if = {
				limit = {
					has_trait = att_trait_movement_lv5
				}
				random_list = {
					699 = {}
					1 = {
						add_trait = att_trait_movement_max
						remove_trait = att_trait_movement_lv5
					}
				}
				break = yes
			}
		}	
	}
}

###FIRE SHOCK EFFECTS WHEN ENTER SYSTEM###
###Disable in 2.0 since it makes no sense for defensive people###
ship_event = {
	id = als.29
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		fromfrom = {
			NOR = {
				is_country_type = swarm
				is_country_type = portal_holder
			}
		}
		exists = leader
		leader = {
			leader_class = admiral
			has_leader_flag = att_admiral
			NOR = { 
				has_trait = att_trait_shock_lv1_a
				has_trait = att_trait_shock_lv2_a
				has_trait = att_trait_shock_lv3_a
				has_trait = att_trait_shock_lv4_a
				has_trait = att_trait_shock_lv5_a
				has_trait = att_trait_shock_max_a
			}
		}
	}
	
	immediate = {
		leader = {
			if = {
				limit = {
					OR = {
						has_trait = att_trait_shock_lv1
						has_trait = att_trait_shock_lv2
						has_trait = att_trait_shock_lv3
						has_trait = att_trait_shock_lv4
						has_trait = att_trait_shock_lv5
						has_trait = att_trait_shock_max
					}
					NOT = {
						has_leader_flag = att_admiral_battle
						has_leader_flag = att_admiral_battle_shocked
					}
				}
				if = {
					limit = {
						has_trait = att_trait_shock_lv1
					}
					random_list = {
						90 = {}
						10 = { 
							set_leader_flag = att_admiral_battle
							fromfrom = {
								country_event = { id = als.31 }
							}
						}
					}
					break = yes
				}
				if = {
					limit = {
						has_trait = att_trait_shock_lv2
					}
					random_list = {
						80 = {}
						20 = { 
							set_leader_flag = att_admiral_battle
							fromfrom = {
								country_event = { id = als.31 }
							}
						}
					}
					break = yes
				}
				if = {
					limit = {
						has_trait = att_trait_shock_lv3
					}
					random_list = {
						65 = {}
						35 = { 
							set_leader_flag = att_admiral_battle
							fromfrom = {
								country_event = { id = als.31 }
							}
						}
					}
					break = yes
				}
				if = {
					limit = {
						has_trait = att_trait_shock_lv4
					}
					random_list = {
						50 = {}
						50 = { 
							set_leader_flag = att_admiral_battle
							fromfrom = {
								country_event = { id = als.31 }
							}
						}
					}
					break = yes
				}
				if = {
					limit = {
						has_trait = att_trait_shock_lv5
					}
					random_list = {
						30 = {}
						70 = { 
							set_leader_flag = att_admiral_battle
							fromfrom = {
								country_event = { id = als.31 }
							}
						}
					}
					break = yes
				}
				if = {
					limit = {
						has_trait = att_trait_shock_max
					}
					random_list = {
						0 = {}
						100 = { 
							set_leader_flag = att_admiral_battle
							fromfrom = {
								country_event = { id = als.31 }
							}
						}
					}
					break = yes
				}
			}
		}
	}
}

###FIRE SHOCK EFFECTS DURING LOSING SHIPS###
#DISABLED IN 2.0 SINCE WE HAVE Force Disparity Combat Bonus now#
country_event = {
	id = als.30
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		relative_power = {
			who = from
			category = fleet
			value < superior
		}
		FROMFROM = {
			owner = {
				NOR = {
					is_country_type = swarm
					is_country_type = portal_holder
				}
			}
			exists = leader
			leader = {
				leader_class = admiral
				has_leader_flag = att_admiral
			}	
		}
	}
	
	immediate = {
		if = {
			limit = {
				relative_power = {
					who = from
					category = fleet
					value < superior
				}
			}
			fromfrom = {
				if = {
					limit = {
						NOR = {
							is_ship_size = destroyer
							is_ship_size = cruiser
							is_ship_size = battleship
						}
					}
					leader = {
						if = {
							limit = {
								OR = {
									has_trait = att_trait_shock_lv1
									has_trait = att_trait_shock_lv2
									has_trait = att_trait_shock_lv3
									has_trait = att_trait_shock_lv4
									has_trait = att_trait_shock_lv5
									has_trait = att_trait_shock_max
								}
								NOT = {
									has_leader_flag = att_admiral_battle_shocked
									has_leader_flag = att_admiral_battle
								}
							}
							
							if = {
								limit = {
									has_trait = att_trait_shock_lv1
								}
								random_list = {
									99 = {}
									1 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}
							if = {
								limit = {
									has_trait = att_trait_shock_lv2
								}
								random_list = {
									98 = {}
									2 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}
							if = {
								limit = {
									has_trait = att_trait_shock_lv3
								}
								random_list = {
									97 = {}
									3 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}
							if = {
								limit = {
									has_trait = att_trait_shock_lv4
								}
								random_list = {
									96 = {}
									4 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}
							if = {
								limit = {
									has_trait = att_trait_shock_lv5
								}
								random_list = {
									95 = {}
									5 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}	
							if = {
								limit = {
									has_trait = att_trait_shock_max
								}
								random_list = {
									94 = {}
									6 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}						
						}
					}
				}
				if = {
					limit = {
						is_ship_size = destroyer
					}
					leader = {
						if = {
							limit = {
								OR = {
									has_trait = att_trait_shock_lv1
									has_trait = att_trait_shock_lv2
									has_trait = att_trait_shock_lv3
									has_trait = att_trait_shock_lv4
									has_trait = att_trait_shock_lv5
									has_trait = att_trait_shock_max
								}
								NOT = {
									has_leader_flag = att_admiral_battle_shocked
									has_leader_flag = att_admiral_battle
								}
							}
							
							if = {
								limit = {
									has_trait = att_trait_shock_lv1
								}
								random_list = {
									98 = {}
									2 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}
							if = {
								limit = {
									has_trait = att_trait_shock_lv2
								}
								random_list = {
									96 = {}
									4 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}
							if = {
								limit = {
									has_trait = att_trait_shock_lv3
								}
								random_list = {
									94 = {}
									6 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}
							if = {
								limit = {
									has_trait = att_trait_shock_lv4
								}
								random_list = {
									92 = {}
									8 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}
							if = {
								limit = {
									has_trait = att_trait_shock_lv5
								}
								random_list = {
									9 = {}
									1 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}	
							if = {
								limit = {
									has_trait = att_trait_shock_max
								}
								random_list = {
									88 = {}
									12 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}						
						}
					}
				}
				if = {
					limit = {
						is_ship_size = cruiser
					}
					leader = {
						if = {
							limit = {
								OR = {
									has_trait = att_trait_shock_lv1
									has_trait = att_trait_shock_lv2
									has_trait = att_trait_shock_lv3
									has_trait = att_trait_shock_lv4
									has_trait = att_trait_shock_lv5
									has_trait = att_trait_shock_max
								}
								NOT = {
									has_leader_flag = att_admiral_battle_shocked
									has_leader_flag = att_admiral_battle
								}
							}
							
							if = {
								limit = {
									has_trait = att_trait_shock_lv1
								}
								random_list = {
									97 = {}
									3 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}
							if = {
								limit = {
									has_trait = att_trait_shock_lv2
								}
								random_list = {
									94 = {}
									6 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}
							if = {
								limit = {
									has_trait = att_trait_shock_lv3
								}
								random_list = {
									91 = {}
									9 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}
							if = {
								limit = {
									has_trait = att_trait_shock_lv4
								}
								random_list = {
									88 = {}
									12 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}
							if = {
								limit = {
									has_trait = att_trait_shock_lv5
								}
								random_list = {
									85 = {}
									15 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}	
							if = {
								limit = {
									has_trait = att_trait_shock_max
								}
								random_list = {
									82 = {}
									18 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}						
						}
					}
				}
				if = {
					limit = {
						is_ship_size = battleship
					}
					leader = {
						if = {
							limit = {
								OR = {
									has_trait = att_trait_shock_lv1
									has_trait = att_trait_shock_lv2
									has_trait = att_trait_shock_lv3
									has_trait = att_trait_shock_lv4
									has_trait = att_trait_shock_lv5
									has_trait = att_trait_shock_max
								}
								NOT = {
									has_leader_flag = att_admiral_battle_shocked
									has_leader_flag = att_admiral_battle
								}
							}
							
							if = {
								limit = {
									has_trait = att_trait_shock_lv1
								}
								random_list = {
									96 = {}
									4 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}
							if = {
								limit = {
									has_trait = att_trait_shock_lv2
								}
								random_list = {
									92 = {}
									8 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}
							if = {
								limit = {
									has_trait = att_trait_shock_lv3
								}
								random_list = {
									88 = {}
									12 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}
							if = {
								limit = {
									has_trait = att_trait_shock_lv4
								}
								random_list = {
									84 = {}
									16 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}
							if = {
								limit = {
									has_trait = att_trait_shock_lv5
								}
								random_list = {
									8 = {}
									2 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}	
							if = {
								limit = {
									has_trait = att_trait_shock_max
								}
								random_list = {
									76 = {}
									24 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}						
						}
					}
				}
			}
		}
		if = {
			limit = {
				relative_power = {
					who = from
					category = fleet
					value < equivalent
				}
			}
			fromfrom = {
				if = {
					limit = {
						NOR = {
							is_ship_size = destroyer
							is_ship_size = cruiser
							is_ship_size = battleship
						}
					}
					leader = {
						if = {
							limit = {
								OR = {
									has_trait = att_trait_shock_lv1
									has_trait = att_trait_shock_lv2
									has_trait = att_trait_shock_lv3
									has_trait = att_trait_shock_lv4
									has_trait = att_trait_shock_lv5
									has_trait = att_trait_shock_max
								}
								NOT = {
									has_leader_flag = att_admiral_battle_shocked
									has_leader_flag = att_admiral_battle
								}
							}
							
							if = {
								limit = {
									has_trait = att_trait_shock_lv1
								}
								random_list = {
									99 = {}
									1 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}
							if = {
								limit = {
									has_trait = att_trait_shock_lv2
								}
								random_list = {
									98 = {}
									2 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}
							if = {
								limit = {
									has_trait = att_trait_shock_lv3
								}
								random_list = {
									97 = {}
									3 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}
							if = {
								limit = {
									has_trait = att_trait_shock_lv4
								}
								random_list = {
									96 = {}
									4 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}
							if = {
								limit = {
									has_trait = att_trait_shock_lv5
								}
								random_list = {
									95 = {}
									5 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}	
							if = {
								limit = {
									has_trait = att_trait_shock_max
								}
								random_list = {
									94 = {}
									6 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}						
						}
					}
				}
				if = {
					limit = {
						is_ship_size = destroyer
					}
					leader = {
						if = {
							limit = {
								OR = {
									has_trait = att_trait_shock_lv1
									has_trait = att_trait_shock_lv2
									has_trait = att_trait_shock_lv3
									has_trait = att_trait_shock_lv4
									has_trait = att_trait_shock_lv5
									has_trait = att_trait_shock_max
								}
								NOT = {
									has_leader_flag = att_admiral_battle_shocked
									has_leader_flag = att_admiral_battle
								}
							}
							
							if = {
								limit = {
									has_trait = att_trait_shock_lv1
								}
								random_list = {
									98 = {}
									2 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}
							if = {
								limit = {
									has_trait = att_trait_shock_lv2
								}
								random_list = {
									96 = {}
									4 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}
							if = {
								limit = {
									has_trait = att_trait_shock_lv3
								}
								random_list = {
									94 = {}
									6 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}
							if = {
								limit = {
									has_trait = att_trait_shock_lv4
								}
								random_list = {
									92 = {}
									8 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}
							if = {
								limit = {
									has_trait = att_trait_shock_lv5
								}
								random_list = {
									9 = {}
									1 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}	
							if = {
								limit = {
									has_trait = att_trait_shock_max
								}
								random_list = {
									88 = {}
									12 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}						
						}
					}
				}
				if = {
					limit = {
						is_ship_size = cruiser
					}
					leader = {
						if = {
							limit = {
								OR = {
									has_trait = att_trait_shock_lv1
									has_trait = att_trait_shock_lv2
									has_trait = att_trait_shock_lv3
									has_trait = att_trait_shock_lv4
									has_trait = att_trait_shock_lv5
									has_trait = att_trait_shock_max
								}
								NOT = {
									has_leader_flag = att_admiral_battle_shocked
									has_leader_flag = att_admiral_battle
								}
							}
							
							if = {
								limit = {
									has_trait = att_trait_shock_lv1
								}
								random_list = {
									97 = {}
									3 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}
							if = {
								limit = {
									has_trait = att_trait_shock_lv2
								}
								random_list = {
									94 = {}
									6 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}
							if = {
								limit = {
									has_trait = att_trait_shock_lv3
								}
								random_list = {
									91 = {}
									9 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}
							if = {
								limit = {
									has_trait = att_trait_shock_lv4
								}
								random_list = {
									88 = {}
									12 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}
							if = {
								limit = {
									has_trait = att_trait_shock_lv5
								}
								random_list = {
									85 = {}
									15 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}	
							if = {
								limit = {
									has_trait = att_trait_shock_max
								}
								random_list = {
									82 = {}
									18 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}						
						}
					}
				}
				if = {
					limit = {
						is_ship_size = battleship
					}
					leader = {
						if = {
							limit = {
								OR = {
									has_trait = att_trait_shock_lv1
									has_trait = att_trait_shock_lv2
									has_trait = att_trait_shock_lv3
									has_trait = att_trait_shock_lv4
									has_trait = att_trait_shock_lv5
									has_trait = att_trait_shock_max
								}
								NOT = {
									has_leader_flag = att_admiral_battle_shocked
									has_leader_flag = att_admiral_battle
								}
							}
							
							if = {
								limit = {
									has_trait = att_trait_shock_lv1
								}
								random_list = {
									96 = {}
									4 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}
							if = {
								limit = {
									has_trait = att_trait_shock_lv2
								}
								random_list = {
									92 = {}
									8 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}
							if = {
								limit = {
									has_trait = att_trait_shock_lv3
								}
								random_list = {
									88 = {}
									12 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}
							if = {
								limit = {
									has_trait = att_trait_shock_lv4
								}
								random_list = {
									84 = {}
									16 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}
							if = {
								limit = {
									has_trait = att_trait_shock_lv5
								}
								random_list = {
									8 = {}
									2 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}	
							if = {
								limit = {
									has_trait = att_trait_shock_max
								}
								random_list = {
									76 = {}
									24 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}						
						}
					}
				}
			}
		}
		if = {
			limit = {
				relative_power = {
					who = from
					category = fleet
					value < inferior
				}
			}
			fromfrom = {
				if = {
					limit = {
						NOR = {
							is_ship_size = destroyer
							is_ship_size = cruiser
							is_ship_size = battleship
						}
					}
					leader = {
						if = {
							limit = {
								OR = {
									has_trait = att_trait_shock_lv1
									has_trait = att_trait_shock_lv2
									has_trait = att_trait_shock_lv3
									has_trait = att_trait_shock_lv4
									has_trait = att_trait_shock_lv5
									has_trait = att_trait_shock_max
								}
								NOT = {
									has_leader_flag = att_admiral_battle_shocked
									has_leader_flag = att_admiral_battle
								}
							}
							
							if = {
								limit = {
									has_trait = att_trait_shock_lv1
								}
								random_list = {
									98 = {}
									2 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}
							if = {
								limit = {
									has_trait = att_trait_shock_lv2
								}
								random_list = {
									96 = {}
									4 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}
							if = {
								limit = {
									has_trait = att_trait_shock_lv3
								}
								random_list = {
									94 = {}
									6 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}
							if = {
								limit = {
									has_trait = att_trait_shock_lv4
								}
								random_list = {
									92 = {}
									8 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}
							if = {
								limit = {
									has_trait = att_trait_shock_lv5
								}
								random_list = {
									9 = {}
									1 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}	
							if = {
								limit = {
									has_trait = att_trait_shock_max
								}
								random_list = {
									88 = {}
									12 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}						
						}
					}
				}
				if = {
					limit = {
						is_ship_size = destroyer
					}
					leader = {
						if = {
							limit = {
								OR = {
									has_trait = att_trait_shock_lv1
									has_trait = att_trait_shock_lv2
									has_trait = att_trait_shock_lv3
									has_trait = att_trait_shock_lv4
									has_trait = att_trait_shock_lv5
									has_trait = att_trait_shock_max
								}
								NOT = {
									has_leader_flag = att_admiral_battle_shocked
									has_leader_flag = att_admiral_battle
								}
							}
							
							if = {
								limit = {
									has_trait = att_trait_shock_lv1
								}
								random_list = {
									92 = {}
									8 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}
							if = {
								limit = {
									has_trait = att_trait_shock_lv2
								}
								random_list = {
									84 = {}
									16 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}
							if = {
								limit = {
									has_trait = att_trait_shock_lv3
								}
								random_list = {
									76 = {}
									24 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}
							if = {
								limit = {
									has_trait = att_trait_shock_lv4
								}
								random_list = {
									68 = {}
									32 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}
							if = {
								limit = {
									has_trait = att_trait_shock_lv5
								}
								random_list = {
									6 = {}
									4 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}	
							if = {
								limit = {
									has_trait = att_trait_shock_max
								}
								random_list = {
									54 = {}
									48 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}						
						}
					}
				}
				if = {
					limit = {
						is_ship_size = cruiser
					}
					leader = {
						if = {
							limit = {
								OR = {
									has_trait = att_trait_shock_lv1
									has_trait = att_trait_shock_lv2
									has_trait = att_trait_shock_lv3
									has_trait = att_trait_shock_lv4
									has_trait = att_trait_shock_lv5
									has_trait = att_trait_shock_max
								}
								NOT = {
									has_leader_flag = att_admiral_battle_shocked
									has_leader_flag = att_admiral_battle
								}
							}
							
							if = {
								limit = {
									has_trait = att_trait_shock_lv1
								}
								random_list = {
									88 = {}
									12 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}
							if = {
								limit = {
									has_trait = att_trait_shock_lv2
								}
								random_list = {
									76 = {}
									24 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}
							if = {
								limit = {
									has_trait = att_trait_shock_lv3
								}
								random_list = {
									64 = {}
									36 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}
							if = {
								limit = {
									has_trait = att_trait_shock_lv4
								}
								random_list = {
									52 = {}
									48 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}
							if = {
								limit = {
									has_trait = att_trait_shock_lv5
								}
								random_list = {
									4 = {}
									6 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}	
							if = {
								limit = {
									has_trait = att_trait_shock_max
								}
								random_list = {
									28 = {}
									72 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}						
						}
					}
				}
				if = {
					limit = {
						is_ship_size = battleship
					}
					leader = {
						if = {
							limit = {
								OR = {
									has_trait = att_trait_shock_lv1
									has_trait = att_trait_shock_lv2
									has_trait = att_trait_shock_lv3
									has_trait = att_trait_shock_lv4
									has_trait = att_trait_shock_lv5
									has_trait = att_trait_shock_max
								}
								NOT = {
									has_leader_flag = att_admiral_battle_shocked
									has_leader_flag = att_admiral_battle
								}
							}
							
							if = {
								limit = {
									has_trait = att_trait_shock_lv1
								}
								random_list = {
									8 = {}
									2 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}
							if = {
								limit = {
									has_trait = att_trait_shock_lv2
								}
								random_list = {
									6 = {}
									4 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}
							if = {
								limit = {
									has_trait = att_trait_shock_lv3
								}
								random_list = {
									4 = {}
									6 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}
							if = {
								limit = {
									has_trait = att_trait_shock_lv4
								}
								random_list = {
									2 = {}
									8 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}
							if = {
								limit = {
									has_trait = att_trait_shock_lv5
								}
								random_list = {
									1 = {}
									9 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}	
							if = {
								limit = {
									has_trait = att_trait_shock_max
								}
								random_list = {
									1 = {}
									9 = {
										set_leader_flag = att_admiral_battle_5days
										set_leader_flag = att_admiral_battle
										root = {
											country_event = { id = als.31 } 
										}
									}
								}
#								break = yes
							}						
						}
					}
				}
			}
		}
	}
}

###ENTERED SYSTEM, LOSING SHIP###
country_event = {
	id = als.31
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
	}
	
	immediate = {
		random_owned_leader = {
			limit = {
				has_leader_flag = att_admiral_battle
				NOT = {
					has_leader_flag = att_admiral_battle_shocked
					has_leader_flag = att_admiral_battle_5days
				}
			}
			remove_leader_flag = att_admiral_battle
			set_timed_leader_flag = { flag = att_admiral_battle_shocked days = 5 }
			if = {
				limit = {
					has_trait = att_trait_shock_lv1
				}
				remove_trait = att_trait_shock_lv1
				add_trait = att_trait_shock_lv1_a
			}
			if = {
				limit = {
					has_trait = att_trait_shock_lv2
				}
				remove_trait = att_trait_shock_lv2
				add_trait = att_trait_shock_lv2_a
			}
			if = {
				limit = {
					has_trait = att_trait_shock_lv3
				}
				remove_trait = att_trait_shock_lv3
				add_trait = att_trait_shock_lv3_a
			}
			if = {
				limit = {
					has_trait = att_trait_shock_lv4
				}
				remove_trait = att_trait_shock_lv4
				add_trait = att_trait_shock_lv4_a
			}
			if = {
				limit = {
					has_trait = att_trait_shock_lv5
				}
				remove_trait = att_trait_shock_lv5
				add_trait = att_trait_shock_lv5_a
			}
			if = {
				limit = {
					has_trait = att_trait_shock_max
				}
				remove_trait = att_trait_shock_max
				add_trait = att_trait_shock_max_a
			}
		}
		random_owned_leader = {
			limit = {
				has_leader_flag = att_admiral_battle
				has_leader_flag = att_admiral_battle_5days
				NOT = {
					has_leader_flag = att_admiral_battle_shocked
				}
			}
			remove_leader_flag = att_admiral_battle
			remove_leader_flag = att_admiral_battle_5days
			set_timed_leader_flag = { flag = att_admiral_battle_shocked days = 5 }
			if = {
				limit = {
					has_trait = att_trait_shock_lv1
				}
				remove_trait = att_trait_shock_lv1
				add_trait = att_trait_shock_lv1_a
			}
			if = {
				limit = {
					has_trait = att_trait_shock_lv2
				}
				remove_trait = att_trait_shock_lv2
				add_trait = att_trait_shock_lv2_a
			}
			if = {
				limit = {
					has_trait = att_trait_shock_lv3
				}
				remove_trait = att_trait_shock_lv3
				add_trait = att_trait_shock_lv3_a
			}
			if = {
				limit = {
					has_trait = att_trait_shock_lv4
				}
				remove_trait = att_trait_shock_lv4
				add_trait = att_trait_shock_lv4_a
			}
			if = {
				limit = {
					has_trait = att_trait_shock_lv5
				}
				remove_trait = att_trait_shock_lv5
				add_trait = att_trait_shock_lv5_a
			}
			if = {
				limit = {
					has_trait = att_trait_shock_max
				}
				remove_trait = att_trait_shock_max
				add_trait = att_trait_shock_max_a
			}
		}
	}
}
###FLEET_EVENT VERSION ONE###
fleet_event = {
	id = als.32
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		is_in_combat = yes
		exists = leader
		leader = {
			leader_class = admiral
			has_leader_flag = att_admiral
			has_leader_flag = att_admiral_battle
		}
	}
	
	immediate = {
		leader = {
			if = {
				limit = {
					NOT = {
						has_leader_flag = att_admiral_battle_shocked
					}
				}
				remove_leader_flag = att_admiral_battle
				set_timed_leader_flag = { flag = att_admiral_battle_shocked days = 5 }
				if = {
					limit = {
						has_trait = att_trait_shock_lv1
					}
					remove_trait = att_trait_shock_lv1
					add_trait = att_trait_shock_lv1_a
					break = yes
				}
				if = {
					limit = {
						has_trait = att_trait_shock_lv2
					}
					remove_trait = att_trait_shock_lv2
					add_trait = att_trait_shock_lv2_a
					break = yes
				}
				if = {
					limit = {
						has_trait = att_trait_shock_lv3
					}
					remove_trait = att_trait_shock_lv3
					add_trait = att_trait_shock_lv3_a
					break = yes
				}
				if = {
					limit = {
						has_trait = att_trait_shock_lv4
					}
					remove_trait = att_trait_shock_lv4
					add_trait = att_trait_shock_lv4_a
					break = yes
				}
				if = {
					limit = {
						has_trait = att_trait_shock_lv5
					}
					remove_trait = att_trait_shock_lv5
					add_trait = att_trait_shock_lv5_a
					break = yes
				}
				if = {
					limit = {
						has_trait = att_trait_shock_max
					}
					remove_trait = att_trait_shock_max
					add_trait = att_trait_shock_max_a
					break = yes
				}
			}
		}		
	}
}

###THE SHOCK EFFECT IS OVER###
country_event = {
	id = als.33
	hide_window = yes

	mean_time_to_happen = {
		days = 3
	}

	immediate = {
		random_owned_leader = {
			limit = {
				leader_class = admiral
				has_leader_flag = att_admiral
				NOT = {
					has_leader_flag = att_admiral_battle_shocked
				}
				OR = {
					has_trait = att_trait_shock_lv1_a
					has_trait = att_trait_shock_lv2_a
					has_trait = att_trait_shock_lv3_a
					has_trait = att_trait_shock_lv4_a
					has_trait = att_trait_shock_lv5_a
					has_trait = att_trait_shock_max_a
				}
			}
			if = {
				limit = {
					has_trait = att_trait_shock_lv1_a
				}
				remove_trait = att_trait_shock_lv1_a
				add_trait = att_trait_shock_lv1
				break = yes
			}
			if = {
				limit = {
					has_trait = att_trait_shock_lv2_a
				}
				remove_trait = att_trait_shock_lv2_a
				add_trait = att_trait_shock_lv2
				break = yes
			}
			if = {
				limit = {
					has_trait = att_trait_shock_lv3_a
				}
				remove_trait = att_trait_shock_lv3_a
				add_trait = att_trait_shock_lv3
				break = yes
			}
			if = {
				limit = {
					has_trait = att_trait_shock_lv4_a
				}
				remove_trait = att_trait_shock_lv4_a
				add_trait = att_trait_shock_lv4
				break = yes
			}
			if = {
				limit = {
					has_trait = att_trait_shock_lv5_a
				}
				remove_trait = att_trait_shock_lv5_a
				add_trait = att_trait_shock_lv5
				break = yes
			}
			if = {
				limit = {
					has_trait = att_trait_shock_max_a
				}
				remove_trait = att_trait_shock_max_a
				add_trait = att_trait_shock_max
				break = yes
			}
		}
	}	
}

###EVERY 3 DAY IN BATTLE MIGHT TRIGGER SHOCK EFFECT###

fleet_event = {
	id = als.35
	hide_window = yes
	
	trigger = {
		is_in_combat = yes
		exists = leader
		leader = {
			leader_class = admiral
			has_leader_flag = att_admiral
			NOT = {
				has_leader_flag = att_admiral_battle
				has_leader_flag = att_admiral_battle_shocked
			}
		}
	}
	
	mean_time_to_happen = {
		days = 3
	}
	
	immediate = {
		leader = {
			if = {
				limit = {
					OR = {
						has_trait = att_trait_shock_lv0
						has_trait = att_trait_shock_lv1
						has_trait = att_trait_shock_lv2
						has_trait = att_trait_shock_lv3
						has_trait = att_trait_shock_lv4
						has_trait = att_trait_shock_lv5
						has_trait = att_trait_shock_max
					}
					NOT = {
						has_leader_flag = att_admiral_battle
						has_leader_flag = att_admiral_battle_shocked
					}
				}
				if = {
					limit = {
						has_trait = att_trait_shock_lv0
					}
					random_list = {
						9 = {
							change_variable = { which = att_admiral_shock_exp value = 1 }
						}
						1 = {
							change_variable = { which = att_admiral_shock_exp value = 3 }
						}
					}
				}
				if = {
					limit = {
						has_trait = att_trait_shock_lv1
					}
					random_list = {
						8 = {
							change_variable = { which = att_admiral_shock_exp value = 1 }
						}
						2 = {
							change_variable = { which = att_admiral_shock_exp value = 3 }
							set_leader_flag = att_admiral_battle
							root = {
								fleet_event = { id = als.32 } 
							}	
						}
					}
				}
				if = {
					limit = {
						has_trait = att_trait_shock_lv2
					}
					random_list = {
						75 = {
							change_variable = { which = att_admiral_shock_exp value = 1 }
						}
						25 = {
							change_variable = { which = att_admiral_shock_exp value = 3 }
							set_leader_flag = att_admiral_battle
							root = {
								fleet_event = { id = als.32 } 
							}
						}
					}
				}
				if = {
					limit = {
						has_trait = att_trait_shock_lv3
					}
					random_list = {
						7 = {
							change_variable = { which = att_admiral_shock_exp value = 1 }
						}
						3 = {
							set_leader_flag = att_admiral_battle
							change_variable = { which = att_admiral_shock_exp value = 2 }
							root = {
								fleet_event = { id = als.32 } 
							}
						}
					}
				}
				if = {
					limit = {
						has_trait = att_trait_shock_lv4
					}
					random_list = {
						65 = {
							change_variable = { which = att_admiral_shock_exp value = 1 }
						}
						35 = {
							set_leader_flag = att_admiral_battle
							change_variable = { which = att_admiral_shock_exp value = 2 }
							root = {
								fleet_event = { id = als.32 } 
							}
						}
					}
				}
				if = {
					limit = {
						has_trait = att_trait_shock_lv5
					}
					random_list = {
						6 = {
							change_variable = { which = att_admiral_shock_exp value = 1 }
						}
						4 = {
							set_leader_flag = att_admiral_battle
							change_variable = { which = att_admiral_shock_exp value = 2 }
							root = {
								fleet_event = { id = als.32 } 
							}
						}
					}
				}	
				if = {
					limit = {
						has_trait = att_trait_shock_max
					}
					random_list = {
						5 = {}
						5 = {
							set_leader_flag = att_admiral_battle
							root = {
								fleet_event = { id = als.32 } 
							}
						}
					}
				}
				if = {
					limit = {
						has_trait = att_trait_shock_lv0
					}
					random_list = {
						99 = {}
						1 = {
							add_trait = att_trait_shock_lv1
							remove_trait = att_trait_shock_lv0
						}
					}
					if = {
						limit = {
							check_variable = { which = att_admiral_shock_exp value > 30 }
						}
						add_trait = att_trait_shock_lv1
						remove_trait = att_trait_shock_lv0
					}
					break = yes
				}
				if = {
					limit = {
						has_trait = att_trait_shock_lv1
					}
					random_list = {
						249 = {}
						1 = {
							add_trait = att_trait_shock_lv2
							remove_trait = att_trait_shock_lv1
						}
					}
					if = {
						limit = {
							check_variable = { which = att_admiral_shock_exp value > 60 }
						}
						add_trait = att_trait_shock_lv2
						remove_trait = att_trait_shock_lv1
					}
					break = yes
				}
				if = {
					limit = {
						has_trait = att_trait_shock_lv2
					}
					random_list = {
						299 = {}
						1 = {
							add_trait = att_trait_shock_lv3
							remove_trait = att_trait_shock_lv2
						}
					}
					if = {
						limit = {
							check_variable = { which = att_admiral_shock_exp value > 120 }
						}
						add_trait = att_trait_shock_lv3
						remove_trait = att_trait_shock_lv2
					}
					break = yes
				}
				if = {
					limit = {
						has_trait = att_trait_shock_lv3
					}
					random_list = {
						499 = {}
						1 = {
							add_trait = att_trait_shock_lv4
							remove_trait = att_trait_shock_lv3
						}
					}
					if = {
						limit = {
							check_variable = { which = att_admiral_shock_exp value > 240 }
						}
						add_trait = att_trait_shock_lv4
						remove_trait = att_trait_shock_lv3
					}
					break = yes
				}
				if = {
					limit = {
						has_trait = att_trait_shock_lv4
					}
					random_list = {
						699 = {}
						1 = {
							add_trait = att_trait_shock_lv5
							remove_trait = att_trait_shock_lv4
						}
					}
					if = {
						limit = {
							check_variable = { which = att_admiral_shock_exp value > 360 }
						}
						add_trait = att_trait_shock_lv5
						remove_trait = att_trait_shock_lv4
					}
					break = yes
				}
				if = {
					limit = {
						has_trait = att_trait_shock_lv5
					}
					random_list = {
						999 = {}
						1 = {
							add_trait = att_trait_shock_max
							remove_trait = att_trait_shock_lv5
						}
					}
					if = {
						limit = {
							check_variable = { which = att_admiral_shock_exp value > 480 }
						}
						add_trait = att_trait_shock_max
						remove_trait = att_trait_shock_lv5
					}
					break = yes
				}				
			}
		}
	}
}
###IF YOU DO HAVE STAR WARS WEAPONS MOD####
country_event = {
	id = als.36
	title = als.36.name
	desc = als.36.desc
	picture = GFX_evt_als_star_wars_weapons
	location = ROOT
	
	trigger = {
		is_ai = no
		NOR = {
			has_global_flag = has_star_wars_weapons_mod_check
			has_global_flag = has_star_wars_weapons_mod_check_ongoing
		}
	}
	
	mean_time_to_happen = {
		days = 5
	}
	
	immediate = {
		set_global_flag = has_star_wars_weapons_mod_check_ongoing
	}
	
	option = {
		name = als.36.a
	} 
	option = {
		name = als.36.b
		set_global_flag = has_star_wars_weapons_mod
		custom_tooltip = als.36.b.tooltip
	} 
	after = {
		set_global_flag = has_star_wars_weapons_mod_check
		remove_global_flag = has_star_wars_weapons_mod_check_ongoing
	}
}

###PEOPLE REQURST: STAR WARS TURBOLASER####
country_event = {
	id = als.37
	hide_window = yes
	
	trigger = {
		has_global_flag = has_star_wars_weapons_mod
		NOR = {
			is_country_type = swarm
			is_country_type = portal_holder
		}
		any_pool_leader = {
			count = all
			leader_class = admiral
			OR = {
				has_trait = att_trait_energy
				has_trait = att_trait_energy2
				has_trait = att_trait_missile
				has_trait = att_trait_missile2
				has_trait = att_trait_kinetic
				has_trait = att_trait_kinetic2
			}
			NOT = {
				has_leader_flag = att_admiral_turbolaser_people
			}			
		}
	}
	
	mean_time_to_happen = {
		days = 5
	}
	
	immediate = { 
		random_pool_leader = {
			limit = {
				leader_class = admiral
				OR = {
					has_trait = att_trait_energy
					has_trait = att_trait_missile
					has_trait = att_trait_kinetic
				}
				NOT = {
					has_leader_flag = att_admiral_turbolaser_people
				}
			}
			random_list = {
				3 = {}
				1 = {
					remove_trait = att_trait_energy
					remove_trait = att_trait_missile
					remove_trait = att_trait_kinetic
					add_trait = att_trait_turbolaser
				}
			}
			set_leader_flag = att_admiral_turbolaser_people
		}
		random_pool_leader = {
			limit = {
				leader_class = admiral
				OR = {
					has_trait = att_trait_energy2
					has_trait = att_trait_missile2
					has_trait = att_trait_kinetic2
				}
				NOT = {
					has_leader_flag = att_admiral_turbolaser_people
				}
			}
			random_list = {
				3 = {}
				1 = {
					remove_trait = att_trait_energy2
					remove_trait = att_trait_missile2
					remove_trait = att_trait_kinetic2
					add_trait = att_trait_turbolaser2
				}
			}
			set_leader_flag = att_admiral_turbolaser_people
		}
	} 
}
###CHECK WHETHER YOUR ADMIRAL HAVE PREFER WEAPON####
country_event = {
	id = als.38
	hide_window = yes
	
	trigger = {
		NOR = {
#			is_country_type = swarm
			is_country_type = portal_holder
		}
		any_owned_leader = {
			leader_class = admiral
			NOR = {
				has_trait = att_trait_energy
				has_trait = att_trait_missile
				has_trait = att_trait_kinetic
				has_trait = att_trait_energy2
				has_trait = att_trait_missile2
				has_trait = att_trait_kinetic2
				has_trait = att_trait_turbolaser
				has_trait = att_trait_turbolaser2
				has_trait = att_trait_craft
				has_trait = att_trait_craft2
				has_trait = att_trait_point
				has_trait = att_trait_point2
			}		
		}
	}
	
	mean_time_to_happen = {
		days = 5
	}
	
	immediate = { 
		random_pool_leader = {
			limit = {
				leader_class = admiral
				NOR = {
					has_trait = att_trait_energy
					has_trait = att_trait_missile
					has_trait = att_trait_kinetic
					has_trait = att_trait_turbolaser
					has_trait = att_trait_energy2
					has_trait = att_trait_missile2
					has_trait = att_trait_kinetic2
					has_trait = att_trait_turbolaser2
					has_trait = att_trait_craft
					has_trait = att_trait_craft2
					has_trait = att_trait_point
					has_trait = att_trait_point2
				}
			}
			random_list = {
				33 = {
					add_trait = att_trait_energy
				}
				33 = {
					add_trait = att_trait_missile
				}
				33 = {
					add_trait = att_trait_kinetic
				}
			}
		}
		every_owned_leader = {
			limit = {
				leader_class = admiral
				NOR = {
					has_trait = att_trait_energy
					has_trait = att_trait_missile
					has_trait = att_trait_kinetic
					has_trait = att_trait_turbolaser
					has_trait = att_trait_energy2
					has_trait = att_trait_missile2
					has_trait = att_trait_kinetic2
					has_trait = att_trait_turbolaser2
					has_trait = att_trait_craft
					has_trait = att_trait_craft2
					has_trait = att_trait_point
					has_trait = att_trait_point2
				}
			}
			random_list = {
				33 = {
					add_trait = att_trait_energy
				}
				33 = {
					add_trait = att_trait_missile
				}
				33 = {
					add_trait = att_trait_kinetic
				}
			}		
		}
		if = {
			limit = {
				is_country_type = swarm
			}
			random_owned_leader = {
				limit = {
					leader_class = admiral
					OR = {
						has_trait = att_trait_energy
						has_trait = att_trait_kinetic
						has_trait = att_trait_turbolaser
						has_trait = att_trait_energy2
						has_trait = att_trait_kinetic2
						has_trait = att_trait_turbolaser2
						has_trait = att_trait_craft
						has_trait = att_trait_craft2
						has_trait = att_trait_point
						has_trait = att_trait_point2
					}
				}
				remove_trait = att_trait_energy
				remove_trait = att_trait_energy2
				remove_trait = att_trait_kinetic
				remove_trait = att_trait_kinetic2
				remove_trait = att_trait_turbolaser
				remove_trait = att_trait_turbolaser2
				remove_trait = att_trait_point
				remove_trait = att_trait_point2
				remove_trait = att_trait_craft
				remove_trait = att_trait_craft2
				add_trait = att_trait_missile
			}
		}
		if = {
			limit = {
				is_country_type = unbidden
			}
			random_owned_leader = {
				limit = {
					leader_class = admiral
					OR = {
						has_trait = att_trait_missile
						has_trait = att_trait_kinetic
						has_trait = att_trait_turbolaser
						has_trait = att_trait_missile2
						has_trait = att_trait_kinetic2
						has_trait = att_trait_turbolaser2
						has_trait = att_trait_craft
						has_trait = att_trait_craft2
						has_trait = att_trait_point
						has_trait = att_trait_point2
					}
				}
				remove_trait = att_trait_missile
				remove_trait = att_trait_missile2
				remove_trait = att_trait_kinetic
				remove_trait = att_trait_kinetic2
				remove_trait = att_trait_turbolaser
				remove_trait = att_trait_turbolaser2
				remove_trait = att_trait_point
				remove_trait = att_trait_point2
				remove_trait = att_trait_craft
				remove_trait = att_trait_craft2
				add_trait = att_trait_energy
			}
		}
		country_event = { id = als.40 }
	} 
}
####ADD ADMIRAL PREFER WEAPON####
country_event = {
	id = als.39
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		NOR = {
#			is_country_type = swarm
			is_country_type = portal_holder
		}
	}
	
	immediate = {
		random_pool_leader = {
			limit = {
				leader_class = admiral
				NOR = {
					has_trait = att_trait_energy
					has_trait = att_trait_missile
					has_trait = att_trait_kinetic
					has_trait = att_trait_turbolaser
					has_trait = att_trait_energy2
					has_trait = att_trait_missile2
					has_trait = att_trait_kinetic2
					has_trait = att_trait_turbolaser2
					has_trait = att_trait_craft
					has_trait = att_trait_craft2
					has_trait = att_trait_point
					has_trait = att_trait_point2
				}
			}
			random_list = {
				33 = {
					add_trait = att_trait_energy
				}
				33 = {
					add_trait = att_trait_missile
				}
				33 = {
					add_trait = att_trait_kinetic
				}
			}
		}
		random_owned_leader = {
			limit = {
				leader_class = admiral
				NOR = {
					has_trait = att_trait_energy
					has_trait = att_trait_missile
					has_trait = att_trait_kinetic
					has_trait = att_trait_turbolaser
					has_trait = att_trait_energy2
					has_trait = att_trait_missile2
					has_trait = att_trait_kinetic2
					has_trait = att_trait_turbolaser2
					has_trait = att_trait_craft
					has_trait = att_trait_craft2
					has_trait = att_trait_point
					has_trait = att_trait_point2
				}
			}
			random_list = {
				33 = {
					add_trait = att_trait_energy
				}
				33 = {
					add_trait = att_trait_missile
				}
				33 = {
					add_trait = att_trait_kinetic
				}
			}		
		}
		country_event = { id = als.40 }
	} 
}


###REFRESH ADMIRAL SKILLS POSITION###
country_event = {
	id = als.40
	hide_window = yes
	
	trigger = {
	}
	
	mean_time_to_happen = {
		days = 360
	}
	
	
	immediate = {
		every_owned_leader = {
			limit = {
				leader_class = admiral
				has_leader_flag = att_admiral
			}
			remove_trait = att_trait_s_slot
			remove_trait = att_trait_m_slot
			remove_trait = att_trait_l_slot
			remove_trait = att_trait_xl_slot
			remove_trait = att_trait_t_slot
			if = {
				limit = {
					has_trait = att_trait_energy
				}
				remove_trait = att_trait_energy
				add_trait = att_trait_energy
			}
			if = {
				limit = {
					has_trait = att_trait_turbolaser
				}
				remove_trait = att_trait_turbolaser
				add_trait = att_trait_turbolaser
			}
			if = {
				limit = {
					has_trait = att_trait_missile
				}
				remove_trait = att_trait_missile
				add_trait = att_trait_missile
			}
			if = {
				limit = {
					has_trait = att_trait_kinetic
				}
				remove_trait = att_trait_kinetic
				add_trait = att_trait_kinetic
			}
			if = {
				limit = {
					has_trait = att_trait_energy2
				}
				remove_trait = att_trait_energy2
				add_trait = att_trait_energy2
			}
			if = {
				limit = {
					has_trait = att_trait_turbolaser2
				}
				remove_trait = att_trait_turbolaser2
				add_trait = att_trait_turbolaser2
			}
			if = {
				limit = {
					has_trait = att_trait_missile2
				}
				remove_trait = att_trait_missile2
				add_trait = att_trait_missile2
			}
			if = {
				limit = {
					has_trait = att_trait_kinetic2
				}
				remove_trait = att_trait_kinetic2
				add_trait = att_trait_kinetic2
			}
			if = {
				limit = {
					has_trait = att_trait_craft
				}
				remove_trait = att_trait_craft
				add_trait = att_trait_craft
			}
			if = {
				limit = {
					has_trait = att_trait_craft2
				}
				remove_trait = att_trait_craft2
				add_trait = att_trait_craft2
			}
			if = {
				limit = {
					has_trait = att_trait_point
				}
				remove_trait = att_trait_point
				add_trait = att_trait_point
			}
			if = {
				limit = {
					has_trait = att_trait_point2
				}
				remove_trait = att_trait_point2
				add_trait = att_trait_point2
			}
			if = {
				limit = {
					has_trait = att_trait_accuracy_lv0
				}
				remove_trait = att_trait_accuracy_lv0
				add_trait = att_trait_accuracy_lv0
			}
			if = {
				limit = {
					has_trait = att_trait_accuracy_lv1
				}
				remove_trait = att_trait_accuracy_lv1
				add_trait = att_trait_accuracy_lv1
			}
			if = {
				limit = {
					has_trait = att_trait_accuracy_lv2
				}
				remove_trait = att_trait_accuracy_lv2
				add_trait = att_trait_accuracy_lv2
			}
			if = {
				limit = {
					has_trait = att_trait_accuracy_lv3
				}
				remove_trait = att_trait_accuracy_lv3
				add_trait = att_trait_accuracy_lv3
			}
			if = {
				limit = {
					has_trait = att_trait_accuracy_lv4
				}
				remove_trait = att_trait_accuracy_lv4
				add_trait = att_trait_accuracy_lv4
			}
			if = {
				limit = {
					has_trait = att_trait_accuracy_lv5
				}
				remove_trait = att_trait_accuracy_lv5
				add_trait = att_trait_accuracy_lv5
			}
			if = {
				limit = {
					has_trait = att_trait_accuracy_max
				}
				remove_trait = att_trait_accuracy_max
				add_trait = att_trait_accuracy_max
			}
			if = {
				limit = {
					has_trait = att_trait_movement_lv0
				}
				remove_trait = att_trait_movement_lv0
				add_trait = att_trait_movement_lv0
			}
			if = {
				limit = {
					has_trait = att_trait_movement_lv1
				}
				remove_trait = att_trait_movement_lv1
				add_trait = att_trait_movement_lv1
			}
			if = {
				limit = {
					has_trait = att_trait_movement_lv2
				}
				remove_trait = att_trait_movement_lv2
				add_trait = att_trait_movement_lv2
			}
			if = {
				limit = {
					has_trait = att_trait_movement_lv3
				}
				remove_trait = att_trait_movement_lv3
				add_trait = att_trait_movement_lv3
			}
			if = {
				limit = {
					has_trait = att_trait_movement_lv4
				}
				remove_trait = att_trait_movement_lv4
				add_trait = att_trait_movement_lv4
			}
			if = {
				limit = {
					has_trait = att_trait_movement_lv5
				}
				remove_trait = att_trait_movement_lv5
				add_trait = att_trait_movement_lv5
			}
			if = {
				limit = {
					has_trait = att_trait_movement_max
				}
				remove_trait = att_trait_movement_max
				add_trait = att_trait_movement_max
			}
			if = {
				limit = {
					has_trait = att_trait_siege_lv0
				}
				remove_trait = att_trait_siege_lv0
				add_trait = att_trait_siege_lv0
			}
			if = {
				limit = {
					has_trait = att_trait_siege_lv1
				}
				remove_trait = att_trait_siege_lv1
				add_trait = att_trait_siege_lv1
			}
			if = {
				limit = {
					has_trait = att_trait_siege_lv2
				}
				remove_trait = att_trait_siege_lv2
				add_trait = att_trait_siege_lv2
			}
			if = {
				limit = {
					has_trait = att_trait_siege_lv3
				}
				remove_trait = att_trait_siege_lv3
				add_trait = att_trait_siege_lv3
			}
			if = {
				limit = {
					has_trait = att_trait_siege_lv4
				}
				remove_trait = att_trait_siege_lv4
				add_trait = att_trait_siege_lv4
			}
			if = {
				limit = {
					has_trait = att_trait_siege_lv5
				}
				remove_trait = att_trait_siege_lv5
				add_trait = att_trait_siege_lv5
			}
			if = {
				limit = {
					has_trait = att_trait_siege_max
				}
				remove_trait = att_trait_siege_max
				add_trait = att_trait_siege_max
			}
			if = {
				limit = {
					has_trait = att_trait_shock_lv0
				}
				remove_trait = att_trait_shock_lv0
				add_trait = att_trait_shock_lv0
			}
			if = {
				limit = {
					has_trait = att_trait_shock_lv1
				}
				remove_trait = att_trait_shock_lv1
				add_trait = att_trait_shock_lv1
			}
			if = {
				limit = {
					has_trait = att_trait_shock_lv2
				}
				remove_trait = att_trait_shock_lv2
				add_trait = att_trait_shock_lv2
			}
			if = {
				limit = {
					has_trait = att_trait_shock_lv3
				}
				remove_trait = att_trait_shock_lv3
				add_trait = att_trait_shock_lv3
			}
			if = {
				limit = {
					has_trait = att_trait_shock_lv4
				}
				remove_trait = att_trait_shock_lv4
				add_trait = att_trait_shock_lv4
			}
			if = {
				limit = {
					has_trait = att_trait_shock_lv5
				}
				remove_trait = att_trait_shock_lv5
				add_trait = att_trait_shock_lv5
			}
			if = {
				limit = {
					has_trait = att_trait_shock_max
				}
				remove_trait = att_trait_shock_max
				add_trait = att_trait_shock_max
			}
			if = {
				limit = {
					has_trait = att_trait_shock_lv1_a
				}
				remove_trait = att_trait_shock_lv1_a
				add_trait = att_trait_shock_lv1_a
			}
			if = {
				limit = {
					has_trait = att_trait_shock_lv2_a
				}
				remove_trait = att_trait_shock_lv2_a
				add_trait = att_trait_shock_lv2_a
			}
			if = {
				limit = {
					has_trait = att_trait_shock_lv3_a
				}
				remove_trait = att_trait_shock_lv3_a
				add_trait = att_trait_shock_lv3_a
			}
			if = {
				limit = {
					has_trait = att_trait_shock_lv4_a
				}
				remove_trait = att_trait_shock_lv4_a
				add_trait = att_trait_shock_lv4_a
			}
			if = {
				limit = {
					has_trait = att_trait_shock_lv5_a
				}
				remove_trait = att_trait_shock_lv5_a
				add_trait = att_trait_shock_lv5_a
			}
			if = {
				limit = {
					has_trait = att_trait_shock_max_a
				}
				remove_trait = att_trait_shock_max_a
				add_trait = att_trait_shock_max_a
			}
			if = {
				limit = {
					OR = {
						has_trait = att_trait_kinetic2
						has_trait = att_trait_missile2
						has_trait = att_trait_energy2
						has_trait = att_trait_point2
						has_trait = att_trait_craft2
						has_trait = att_trait_turbolaser2
					}
					OR = {
						has_trait = att_trait_kinetic
						has_trait = att_trait_missile
						has_trait = att_trait_energy
						has_trait = att_trait_point
						has_trait = att_trait_craft
						has_trait = att_trait_turbolaser
					}
				}
				remove_trait = att_trait_missile
				remove_trait = att_trait_kinetic
				remove_trait = att_trait_energy
				remove_trait = att_trait_point
				remove_trait = att_trait_craft
				remove_trait = att_trait_turbolaser
			}
		}
	}
}
###ADD ADMIRAL EXPERTISED WEAPON TYPE AT LEVEL 5###
country_event = {
	id = als.41
	hide_window = yes
	trigger = {
		NOR = {
			is_country_type = swarm
			is_country_type = portal_holder
		}
	}
	
	mean_time_to_happen = {
		days = 25
	}
	
	immediate = { 
		every_pool_leader = {
			limit = {
				leader_class = admiral
				has_skill > 4
				OR = {
					has_trait = att_trait_energy
					has_trait = att_trait_missile
					has_trait = att_trait_kinetic
					has_trait = att_trait_turbolaser
					has_trait = att_trait_craft
					has_trait = att_trait_point
				}
				NOT = {
					has_leader_flag = att_admiral_expirtised_weapon
				}
			}
			set_leader_flag = att_admiral_expirtised_weapon
			if = {
				limit = {
					has_trait = att_trait_energy
				}
				remove_trait = att_trait_energy
				add_trait = att_trait_energy2
			}
			if = {
				limit = {
					has_trait = att_trait_turbolaser
				}
				remove_trait = att_trait_turbolaser
				add_trait = att_trait_turbolaser2
			}
			if = {
				limit = {
					has_trait = att_trait_kinetic
				}
				remove_trait = att_trait_kinetic
				add_trait = att_trait_kinetic2
			}
			if = {
				limit = {
					has_trait = att_trait_missile
				}
				remove_trait = att_trait_missile
				add_trait = att_trait_missile2
			}
			if = {
				limit = {
					has_trait = att_trait_craft
				}
				remove_trait = att_trait_craft
				add_trait = att_trait_craft2
			}
			if = {
				limit = {
					has_trait = att_trait_point
				}
				remove_trait = att_trait_point
				add_trait = att_trait_point2
			}
		}
		every_owned_leader = {
			limit = {
				leader_class = admiral
				has_skill > 4
				OR = {
					has_trait = att_trait_energy
					has_trait = att_trait_missile
					has_trait = att_trait_kinetic
					has_trait = att_trait_turbolaser
					has_trait = att_trait_craft
					has_trait = att_trait_point
				}
				NOT = {
					has_leader_flag = att_admiral_expirtised_weapon
				}
			}
			set_leader_flag = att_admiral_expirtised_weapon
			if = {
				limit = {
					has_trait = att_trait_energy
				}
				remove_trait = att_trait_energy
				add_trait = att_trait_energy2
			}
			if = {
				limit = {
					has_trait = att_trait_turbolaser
				}
				remove_trait = att_trait_turbolaser
				add_trait = att_trait_turbolaser2
			}
			if = {
				limit = {
					has_trait = att_trait_kinetic
				}
				remove_trait = att_trait_kinetic
				add_trait = att_trait_kinetic2
			}
			if = {
				limit = {
					has_trait = att_trait_missile
				}
				remove_trait = att_trait_missile
				add_trait = att_trait_missile2
			}
			if = {
				limit = {
					has_trait = att_trait_craft
				}
				remove_trait = att_trait_craft
				add_trait = att_trait_craft2
			}
			if = {
				limit = {
					has_trait = att_trait_point
				}
				remove_trait = att_trait_point
				add_trait = att_trait_point2
			}
		}
		every_owned_leader = {
			limit = {
				leader_class = admiral
				has_skill > 999
				NOR = {
					has_trait = att_trait_s_slot
					has_trait = att_trait_m_slot
					has_trait = att_trait_l_slot
					has_trait = att_trait_xl_slot
					has_trait = att_trait_t_slot
					has_leader_flag = att_admiral_expirtised_weapon
				}
			}
			set_leader_flag = att_admiral_expirtised_weapon
			if = {
				limit = {
					OR = {
						ROOT = {
							has_technology = tech_torpedoes_1
							has_technology = tech_torpedoes_2
							has_technology = tech_torpedoes_3
							has_technology = tech_energy_torpedoes_1
							has_technology = tech_energy_torpedoes_2
						}	
					}
				}
				random_list = {
					90 = {}
					10 = { add_trait = att_trait_t_slot }
				}
			}
			if = {
				limit = {
					NOT = {
						has_trait = att_trait_t_slot
					}
					OR = {
						ROOT = {
							has_technology = tech_arc_emitter_1
							has_technology = tech_arc_emitter_2
							has_technology = tech_energy_lance_1
							has_technology = tech_energy_lance_2
							has_technology = tech_mass_accelerator_1
							has_technology = tech_mass_accelerator_2
						}
					}
				}
				random_list = {
					90 = {}
					10 = { add_trait = att_trait_xl_slot }
				}
			}
			if = {
				limit = {
					NOR = {
						has_trait = att_trait_t_slot
						has_trait = att_trait_xl_slot
					}
					ROOT = {
						has_technology = tech_spaceport_3
					}
				}
				random_list = {
					33 = {}
					33 = { add_trait = att_trait_l_slot }
					33 = { add_trait = att_trait_m_slot }
				}
			}
			if = {
				limit = {
					NOR = {
						has_trait = att_trait_t_slot
						has_trait = att_trait_xl_slot
						has_trait = att_trait_l_slot
						has_trait = att_trait_m_slot
					}
				}
				add_trait = att_trait_s_slot
			}
		}
		country_event = { id = als.40 }
	} 	
}
###ADMIRAL CAN CHANGE THEIR EXPERTISED AFTER LEVEL 5###
fleet_event = {
	id = als.42
	title = als.42.name
	desc = als.42.desc
	picture = GFX_evt_federation_fleet
	location = ROOT
	show_sound = event_laboratory_sound
	
	trigger = {
		owner = {
			is_ai = no
			is_at_war = no
#			is_country_type = default
			NOR = {
				has_country_flag = att_admiral_change_slot_ongoing
				has_country_edict = att_admiral_no_skill_change
			}
		}
		exists = leader
		leader = {
			has_skill > 4
			has_leader_flag = att_admiral_expirtised_weapon
			NOT = {
				has_leader_flag = att_admiral_change_slot
			}
		}
	}
	
	mean_time_to_happen = {
		days = 180
	}
	
	immediate = {
		owner = {
			set_timed_country_flag = { flag = att_admiral_change_slot_ongoing days = 1080 }
		}
		leader = {
			set_timed_leader_flag = { flag = att_admiral_change_slot days = 5400 }
			if = {
				limit = {
					has_trait = att_trait_missile
				}
				set_leader_flag = has_missile_slot
			}
			if = {
				limit = {
					has_trait = att_trait_missile2
				}
				set_leader_flag = has_missile_slot2
			}
			if = {
				limit = {
					has_trait = att_trait_energy
				}
				set_leader_flag = has_energy_slot
			}
			if = {
				limit = {
					has_trait = att_trait_energy2
				}
				set_leader_flag = has_energy_slot2
			}
			if = {
				limit = {
					has_trait = att_trait_turbolaser
				}
				set_leader_flag = has_turbolaser_slot
			}
			if = {
				limit = {
					has_trait = att_trait_turbolaser2
				}
				set_leader_flag = has_turbolaser_slot2
			}
			if = {
				limit = {
					has_trait = att_trait_kinetic
				}
				set_leader_flag = has_kinetic_slot
			}
			if = {
				limit = {
					has_trait = att_trait_kinetic2
				}
				set_leader_flag = has_kinetic_slot2
			}
			if = {
				limit = {
					has_trait = att_trait_craft
				}
				set_leader_flag = has_craft_slot
			}
			if = {
				limit = {
					has_trait = att_trait_craft2
				}
				set_leader_flag = has_craft_slot2
			}
			if = {
				limit = {
					has_trait = att_trait_point
				}
				set_leader_flag = has_point_slot
			}
			if = {
				limit = {
					has_trait = att_trait_point2
				}
				set_leader_flag = has_point_slot2
			}
			save_global_event_target_as = att_admiral_changeing
		}
	}
	option = {
		name = als.42.a
		trigger = {
			leader = {
				OR = {
					has_trait = att_trait_energy2
					has_trait = att_trait_missile2
					has_trait = att_trait_kinetic2
					has_trait = att_trait_turbolaser2
					has_trait = att_trait_craft2
					has_trait = att_trait_point2
				}
			}
		}
		owner = {
			hidden_effect = {
				country_event = { id = als.43 }		
			}	
		}
	}
	option = {
		name = als.42.b
		trigger = {
			leader = {
				OR = {
					has_trait = att_trait_energy
					has_trait = att_trait_missile
					has_trait = att_trait_kinetic
					has_trait = att_trait_turbolaser
					has_trait = att_trait_craft
					has_trait = att_trait_point
				}
			}
		}
		custom_tooltip = als.42.b.tooltip
		leader = {
			if = {
				limit = {
					has_trait = att_trait_energy
				}
				hidden_effect = {
					remove_trait = att_trait_energy
				}		
				add_trait = att_trait_energy2
			}
			if = {
				limit = {
					has_trait = att_trait_turbolaser
				}
				hidden_effect = {
					remove_trait = att_trait_turbolaser
				}		
				add_trait = att_trait_turbolaser2
			}
			if = {
				limit = {
					has_trait = att_trait_missile
				}
				hidden_effect = {
					remove_trait = att_trait_missile
				}
				add_trait = att_trait_missile2
			}
			if = {
				limit = {
					has_trait = att_trait_kinetic
				}
				hidden_effect = {
					remove_trait = att_trait_kinetic
				}
				add_trait = att_trait_kinetic2
			}
			if = {
				limit = {
					has_trait = att_trait_point
				}
				hidden_effect = {
					remove_trait = att_trait_point
				}
				add_trait = att_trait_point2
			}
			if = {
				limit = {
					has_trait = att_trait_craft
				}
				hidden_effect = {
					remove_trait = att_trait_craft
				}
				add_trait = att_trait_craft2
			}
			remove_leader_flag = has_energy_slot
			remove_leader_flag = has_energy_slot2
			remove_leader_flag = has_turbolaser_slot
			remove_leader_flag = has_turbolaser_slot2
			remove_leader_flag = has_missile_slot
			remove_leader_flag = has_missile_slot2
			remove_leader_flag = has_kinetic_slot
			remove_leader_flag = has_kinetic_slot2
			remove_leader_flag = has_craft_slot
			remove_leader_flag = has_craft_slot2
			remove_leader_flag = has_point_slot
			remove_leader_flag = has_point_slot2
		}
		owner = {
			clear_global_event_target = att_admiral_changeing
		}
	}
	option = {
		name = als.42.c
		owner = {
			hidden_effect = {
				country_event = { id = als.44 }
			}
		}	
	}
}
####ARE YOU SURE NOT TO CHANGE THE PREFER SLOT###
country_event = {
	id = als.43
	title = als.43.name
	desc = als.43.desc
	picture = GFX_evt_federation_fleet
	show_sound = event_default
	is_triggered_only = yes
	
	option = {
		name = als.43.a
		custom_tooltip = als.43.a.tooltip
		event_target:att_admiral_changeing = {
			remove_leader_flag = has_energy_slot
			remove_leader_flag = has_energy_slot2
			remove_leader_flag = has_turbolaser_slot
			remove_leader_flag = has_turbolaser_slot2
			remove_leader_flag = has_missile_slot
			remove_leader_flag = has_missile_slot2
			remove_leader_flag = has_kinetic_slot
			remove_leader_flag = has_kinetic_slot2
			remove_leader_flag = has_craft_slot
			remove_leader_flag = has_craft_slot2
			remove_leader_flag = has_point_slot
			remove_leader_flag = has_point_slot2
		}
		clear_global_event_target = att_admiral_changeing
	}
	option = {
		name = als.43.b
#		add_influence = -25
		hidden_effect = {
			country_event = { id = als.44 }
		}
	}
}
###SELECT ONE THE ADMIRAL PREFER TYPE YOU WANT###
country_event = {
	id = als.44
	title = als.44.name
	desc = als.44.desc
	picture = GFX_evt_federation_fleet
	is_triggered_only = yes
	
	trigger = {
		any_owned_leader = {
			leader_class = admiral
			has_leader_flag = att_admiral
			has_leader_flag = att_admiral_change_slot
		}
	}

	option = {
		name = als.44.a
		trigger = {
			event_target:att_admiral_changeing = {	
				NOR = {
					has_leader_flag = has_energy_slot
					has_leader_flag = has_energy_slot2
				}
			}	
		}
		event_target:att_admiral_changeing = {
			hidden_effect = {
				remove_trait = att_trait_missile
				remove_trait = att_trait_missile2
				remove_trait = att_trait_kinetic
				remove_trait = att_trait_kinetic2
				remove_trait = att_trait_turbolaser
				remove_trait = att_trait_turbolaser2
				remove_trait = att_trait_craft
				remove_trait = att_trait_craft2
				remove_trait = att_trait_point
				remove_trait = att_trait_point2
			}
			add_trait = att_trait_energy
		}
		event_target:att_admiral_changeing = {
			remove_leader_flag = has_energy_slot
			remove_leader_flag = has_energy_slot2
			remove_leader_flag = has_missile_slot
			remove_leader_flag = has_missile_slot2
			remove_leader_flag = has_kinetic_slot
			remove_leader_flag = has_kinetic_slot2
			remove_leader_flag = has_turbolaser_slot
			remove_leader_flag = has_turbolaser_slot2
			remove_leader_flag = has_craft_slot
			remove_leader_flag = has_craft_slot2
			remove_leader_flag = has_point_slot
			remove_leader_flag = has_point_slot2
		}
		clear_global_event_target = att_admiral_changeing
	}
	
	option = {
		name = als.44.b
		trigger = {
			event_target:att_admiral_changeing = {	
				NOR = {
					has_leader_flag = has_missile_slot
					has_leader_flag = has_missile_slot2
				}
			}	
		}
		event_target:att_admiral_changeing = {
			hidden_effect = {
				remove_trait = att_trait_energy
				remove_trait = att_trait_energy2
				remove_trait = att_trait_kinetic
				remove_trait = att_trait_kinetic2
				remove_trait = att_trait_turbolaser
				remove_trait = att_trait_turbolaser2
				remove_trait = att_trait_craft
				remove_trait = att_trait_craft2
				remove_trait = att_trait_point
				remove_trait = att_trait_point2
			}
			add_trait = att_trait_missile
		}
		event_target:att_admiral_changeing = {
			remove_leader_flag = has_energy_slot
			remove_leader_flag = has_energy_slot2
			remove_leader_flag = has_missile_slot
			remove_leader_flag = has_missile_slot2
			remove_leader_flag = has_kinetic_slot
			remove_leader_flag = has_kinetic_slot2
			remove_leader_flag = has_turbolaser_slot
			remove_leader_flag = has_turbolaser_slot2
			remove_leader_flag = has_craft_slot
			remove_leader_flag = has_craft_slot2
			remove_leader_flag = has_point_slot
			remove_leader_flag = has_point_slot2
		}
		clear_global_event_target = att_admiral_changeing
	}
	
	option = {
		name = als.44.c
		trigger = {
			event_target:att_admiral_changeing = {	
				NOR = {
					has_leader_flag = has_kinetic_slot
					has_leader_flag = has_kinetic_slot2
				}
			}	
		}
		event_target:att_admiral_changeing = {
			hidden_effect = {
				remove_trait = att_trait_energy
				remove_trait = att_trait_energy2
				remove_trait = att_trait_missile
				remove_trait = att_trait_missile2
				remove_trait = att_trait_turbolaser
				remove_trait = att_trait_turbolaser2
				remove_trait = att_trait_craft
				remove_trait = att_trait_craft2
				remove_trait = att_trait_point
				remove_trait = att_trait_point2
			}
			add_trait = att_trait_kinetic
		}
		event_target:att_admiral_changeing = {
			remove_leader_flag = has_energy_slot
			remove_leader_flag = has_energy_slot2
			remove_leader_flag = has_missile_slot
			remove_leader_flag = has_missile_slot2
			remove_leader_flag = has_kinetic_slot
			remove_leader_flag = has_kinetic_slot2
			remove_leader_flag = has_turbolaser_slot
			remove_leader_flag = has_turbolaser_slot2
			remove_leader_flag = has_craft_slot
			remove_leader_flag = has_craft_slot2
			remove_leader_flag = has_point_slot
			remove_leader_flag = has_point_slot2
		}
		clear_global_event_target = att_admiral_changeing
	}
	
	option = {
		name = als.44.d
		trigger = {
			has_global_flag = has_star_wars_weapons_mod
			event_target:att_admiral_changeing = {	
				NOR = {
					has_leader_flag = has_turbolaser_slot
					has_leader_flag = has_turbolaser_slot2
				}
			}	
		}
		event_target:att_admiral_changeing = {
			hidden_effect = {
				remove_trait = att_trait_missile
				remove_trait = att_trait_missile2
				remove_trait = att_trait_energy
				remove_trait = att_trait_energy2
				remove_trait = att_trait_kinetic
				remove_trait = att_trait_kinetic2
				remove_trait = att_trait_craft
				remove_trait = att_trait_craft2
				remove_trait = att_trait_point
				remove_trait = att_trait_point2
			}
			add_trait = att_trait_turbolaser
		}
		event_target:att_admiral_changeing = {
			remove_leader_flag = has_energy_slot
			remove_leader_flag = has_energy_slot2
			remove_leader_flag = has_missile_slot
			remove_leader_flag = has_missile_slot2
			remove_leader_flag = has_kinetic_slot
			remove_leader_flag = has_kinetic_slot2
			remove_leader_flag = has_turbolaser_slot
			remove_leader_flag = has_turbolaser_slot2
			remove_leader_flag = has_craft_slot
			remove_leader_flag = has_craft_slot2
			remove_leader_flag = has_point_slot
			remove_leader_flag = has_point_slot2
		}
		clear_global_event_target = att_admiral_changeing
	}
	
	option = {
		name = als.44.e
		trigger = {
			OR = {
				has_technology = tech_strike_craft_1
				has_technology = tech_strike_craft_2
				has_technology = tech_strike_craft_3
			}
			event_target:att_admiral_changeing = {	
				NOR = {
					has_leader_flag = has_craft_slot
					has_leader_flag = has_craft_slot2
				}
			}	
		}
		event_target:att_admiral_changeing = {
			hidden_effect = {
				remove_trait = att_trait_missile
				remove_trait = att_trait_missile2
				remove_trait = att_trait_energy
				remove_trait = att_trait_energy2
				remove_trait = att_trait_kinetic
				remove_trait = att_trait_kinetic2
				remove_trait = att_trait_turbolaser
				remove_trait = att_trait_turbolaser2
				remove_trait = att_trait_point
				remove_trait = att_trait_point2
			}
			add_trait = att_trait_craft
		}
		event_target:att_admiral_changeing = {
			remove_leader_flag = has_energy_slot
			remove_leader_flag = has_energy_slot2
			remove_leader_flag = has_missile_slot
			remove_leader_flag = has_missile_slot2
			remove_leader_flag = has_kinetic_slot
			remove_leader_flag = has_kinetic_slot2
			remove_leader_flag = has_turbolaser_slot
			remove_leader_flag = has_turbolaser_slot2
			remove_leader_flag = has_craft_slot
			remove_leader_flag = has_craft_slot2
			remove_leader_flag = has_point_slot
			remove_leader_flag = has_point_slot2
		}
		clear_global_event_target = att_admiral_changeing
	}
	
	option = {
		name = als.44.f
		trigger = {
			OR = {
				has_technology = tech_pd_tracking_1
				has_technology = tech_pd_tracking_2
				has_technology = tech_pd_tracking_3
				has_technology = tech_flak_batteries_1
				has_technology = tech_flak_batteries_2
			}
			event_target:att_admiral_changeing = {	
				NOR = {
					has_leader_flag = has_point_slot
					has_leader_flag = has_point_slot2
				}
			}	
		}
		event_target:att_admiral_changeing = {
			hidden_effect = {
				remove_trait = att_trait_missile
				remove_trait = att_trait_missile2
				remove_trait = att_trait_energy
				remove_trait = att_trait_energy2
				remove_trait = att_trait_kinetic
				remove_trait = att_trait_kinetic2
				remove_trait = att_trait_craft
				remove_trait = att_trait_craft2
				remove_trait = att_trait_turbolaser
				remove_trait = att_trait_turbolaser2
			}
			add_trait = att_trait_point
		}
		event_target:att_admiral_changeing = {
			remove_leader_flag = has_energy_slot
			remove_leader_flag = has_energy_slot2
			remove_leader_flag = has_missile_slot
			remove_leader_flag = has_missile_slot2
			remove_leader_flag = has_kinetic_slot
			remove_leader_flag = has_kinetic_slot2
			remove_leader_flag = has_turbolaser_slot
			remove_leader_flag = has_turbolaser_slot2
			remove_leader_flag = has_craft_slot
			remove_leader_flag = has_craft_slot2
			remove_leader_flag = has_point_slot
			remove_leader_flag = has_point_slot2
		}
		clear_global_event_target = att_admiral_changeing
	}
	
	option = {
		name = als.44.g
		hidden_effect = {
			country_event = { id = als.43 }
		}
	}
	
#	after = {
#		event_target:att_admiral_changeing = {
#			remove_leader_flag = has_energy_slot
#			remove_leader_flag = has_energy_slot2
#			remove_leader_flag = has_missile_slot
#			remove_leader_flag = has_missile_slot2
#			remove_leader_flag = has_kinetic_slot
#			remove_leader_flag = has_kinetic_slot2
#			remove_leader_flag = has_turbolaser_slot
#			remove_leader_flag = has_turbolaser_slot2
#			remove_leader_flag = has_craft_slot
#			remove_leader_flag = has_craft_slot2
#			remove_leader_flag = has_point_slot
#			remove_leader_flag = has_point_slot2
#		}
#		clear_global_event_target = att_admiral_changeing
#	}
}
####CHECK YOUR WEAPON TECH, THEN ADD NEW PREFER TO POOL ADMIRAL####
country_event = {
	id = als.45
	hide_window = yes
	
	trigger = {
		NOR = {
			is_country_type = swarm
			is_country_type = portal_holder
		}
		any_pool_leader = {
			count = all
			leader_class = admiral
			OR = {
				has_trait = att_trait_energy
				has_trait = att_trait_energy2
				has_trait = att_trait_missile
				has_trait = att_trait_missile2
				has_trait = att_trait_kinetic
				has_trait = att_trait_kinetic2
			}
			NOT = {
				AND = {
					has_leader_flag = att_admiral_another_preferred
					has_leader_flag = att_admiral_another_preferred_2
				}
			}			
		}
	}
	
	mean_time_to_happen = {
		days = 5
	}
	
	immediate = { 
		random_pool_leader = {
			limit = {
				ROOT = {
					OR = {
						has_technology = tech_pd_tracking_1
						has_technology = tech_pd_tracking_2
						has_technology = tech_pd_tracking_3
						has_technology = tech_flak_batteries_1
						has_technology = tech_flak_batteries_2
					}
				}
				leader_class = admiral
				OR = {
					has_trait = att_trait_energy
					has_trait = att_trait_missile
					has_trait = att_trait_kinetic
				}
				NOT = {
					has_leader_flag = att_admiral_another_preferred
				}
			}
			random_list = {
				4 = {}
				1 = {
					remove_trait = att_trait_energy
					remove_trait = att_trait_missile
					remove_trait = att_trait_kinetic
					add_trait = att_trait_point
				}
			}
			set_leader_flag = att_admiral_another_preferred
		}
		random_pool_leader = {
			limit = {
				ROOT = {
					OR = {
						has_technology = tech_pd_tracking_1
						has_technology = tech_pd_tracking_2
						has_technology = tech_pd_tracking_3
						has_technology = tech_flak_batteries_1
						has_technology = tech_flak_batteries_2
					}
				}
				leader_class = admiral
				OR = {
					has_trait = att_trait_energy2
					has_trait = att_trait_missile2
					has_trait = att_trait_kinetic2
				}
				NOT = {
					has_leader_flag = att_admiral_another_preferred
				}
			}
			random_list = {
				4 = {}
				1 = {
					remove_trait = att_trait_energy2
					remove_trait = att_trait_missile2
					remove_trait = att_trait_kinetic2
					add_trait = att_trait_point2
				}
			}
			set_leader_flag = att_admiral_another_preferred
		}
		random_pool_leader = {
			limit = {
				ROOT = {
					OR = {
						has_technology = tech_strike_craft_1
						has_technology = tech_strike_craft_2
						has_technology = tech_strike_craft_3
					}
				}
				leader_class = admiral
				OR = {
					has_trait = att_trait_energy
					has_trait = att_trait_missile
					has_trait = att_trait_kinetic
				}
				NOT = {
					has_leader_flag = att_admiral_another_preferred_2
				}
			}
			random_list = {
				4 = {}
				1 = {
					remove_trait = att_trait_energy
					remove_trait = att_trait_missile
					remove_trait = att_trait_kinetic
					add_trait = att_trait_craft
				}
			}
			set_leader_flag = att_admiral_another_preferred_2
		}
		random_pool_leader = {
			limit = {
				ROOT = {
					OR = {
						has_technology = tech_strike_craft_1
						has_technology = tech_strike_craft_2
						has_technology = tech_strike_craft_3
					}
				}
				leader_class = admiral
				OR = {
					has_trait = att_trait_energy2
					has_trait = att_trait_missile2
					has_trait = att_trait_kinetic2
				}
				NOT = {
					has_leader_flag = att_admiral_another_preferred_2
				}
			}
			random_list = {
				4 = {}
				1 = {
					remove_trait = att_trait_energy2
					remove_trait = att_trait_missile2
					remove_trait = att_trait_kinetic2
					add_trait = att_trait_craft2
				}
			}
			set_leader_flag = att_admiral_another_preferred_2
		}
	} 
}

####WHEN BOMBARDMENTING THE PLANET, YOUR ADMIRAL IS EATING POPCORN AND GAIN EXPERIENCE####
fleet_event = {
	id = als.50
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		from = {
			has_orbital_bombardment = yes
		}
		exists = leader
		leader = {
			leader_class = admiral
			has_leader_flag = att_admiral
			OR = {
				has_trait = att_trait_siege_lv0
				has_trait = att_trait_siege_lv1
				has_trait = att_trait_siege_lv2
				has_trait = att_trait_siege_lv3
				has_trait = att_trait_siege_lv4
				has_trait = att_trait_siege_lv5
				has_trait = att_trait_siege_max
			}
		}
	}
	
	immediate = {
		IF = {
			limit = {
				leader = {
					has_trait = att_trait_siege_lv0
				}
			}
			random_list = {
				19 = {}
				1 = { 
					leader = {
						add_experience = 1
					}
				}
			}
		}
		IF = {
			limit = {
				leader = {
					has_trait = att_trait_siege_lv1
				}
			}
			random_list = {
				19 = {}
				1 = { 
					leader = {
						add_experience = 1
					}
				}
			}
		}
		IF = {
			limit = {
				leader = {
					has_trait = att_trait_siege_lv2
				}
			}
			random_list = {
				9 = {}
				1 = { 
					leader = {
						add_experience = 1
					}					
				}
			}
		}
		IF = {
			limit = {
				leader = {
					has_trait = att_trait_siege_lv3
				}
			}
			random_list = {
				85 = {}
				15 = { 
					leader = {
						add_experience = 1
					}					
				}
			}
		}
		IF = {
			limit = {
				leader = {
					has_trait = att_trait_siege_lv4
				}
			}
			random_list = {
				7 = {}
				3 = { 
					leader = {
						add_experience = 1
					}			
				}
			}
		}
		IF = {
			limit = {
				leader = {
					has_trait = att_trait_siege_lv5
				}
			}
			random_list = {
				5 = {}
				5 = { 
					leader = {
						add_experience = 1
					}				
				}
			}
		}
		IF = {
			limit = {
				leader = {
					has_trait = att_trait_siege_max
				}
			}
			from = {
				leader = {
					add_experience = 1
				}
			}					
		}
	}
}

###SIEGE COULD LEVEL UP WHENEVER ADMIRAL BOMBARDMENTING THE PLANET###
fleet_event = {
	id = als.51
	hide_window = yes
#	is_triggered_only = yes
	
	trigger = {
		has_fleet_flag = att_siege_ongoing
		exists = leader
		leader = {
			leader_class = admiral
			has_leader_flag = att_admiral
			NOT = {
				has_leader_flag = att_admiral_siege_levelup_end
			}
			OR = {
				has_trait = att_trait_siege_lv0
				has_trait = att_trait_siege_lv1
				has_trait = att_trait_siege_lv2
				has_trait = att_trait_siege_lv3
				has_trait = att_trait_siege_lv4
				has_trait = att_trait_siege_lv5
			}
		}
	}
	
	mean_time_to_happen = {
		days = 30
	}
	
	immediate = {
#		print_scope_effect = yes
		IF = {
			limit = {
				leader = {
					has_trait = att_trait_siege_lv0
				}
			}
			random_list = {
				15 = {
					leader = {
						change_variable = { which = att_admiral_siege_exp value = 0.2 }
					}
				}
				1 = { 
					leader = {
						remove_trait = att_trait_siege_lv0
						add_trait = att_trait_siege_lv1
						set_timed_leader_flag = { flag = att_admiral_siege_levelup_end days = 360 }
					}
				}
			}
			if = {
				limit = {
					leader = {
						check_variable = { which = att_admiral_siege_exp value > 5 }
					}
				}
				leader = {
					remove_trait = att_trait_siege_lv0
					add_trait = att_trait_siege_lv1
					set_timed_leader_flag = { flag = att_admiral_siege_levelup_end days = 360 }
				}
			}
			break = yes
		}
		IF = {
			limit = {
				leader = {
					has_trait = att_trait_siege_lv1
				}
			}
			random_list = {
				25 = {
					leader = {
						change_variable = { which = att_admiral_siege_exp value = 0.2 }
					}
				}
				1 = { 
					leader = {
						remove_trait = att_trait_siege_lv1
						add_trait = att_trait_siege_lv2
						set_timed_leader_flag = { flag = att_admiral_siege_levelup_end days = 360 }
					}
				}
			}
			if = {
				limit = {
					leader = {
						check_variable = { which = att_admiral_siege_exp value > 15 }
					}
				}
				leader = {
					remove_trait = att_trait_siege_lv1
					add_trait = att_trait_siege_lv2
					set_timed_leader_flag = { flag = att_admiral_siege_levelup_end days = 360 }
				}
			}
			break = yes
		}
		IF = {
			limit = {
				leader = {
					has_trait = att_trait_siege_lv2
				}
			}
			random_list = {
				40 = {
					leader = {
						change_variable = { which = att_admiral_siege_exp value = 0.2 }
					}
				}
				1 = { 
					leader = {
						remove_trait = att_trait_siege_lv2
						add_trait = att_trait_siege_lv3
						set_timed_leader_flag = { flag = att_admiral_siege_levelup_end days = 720 }
					}
				}
			}
			if = {
				limit = {
					leader = {
						check_variable = { which = att_admiral_siege_exp value > 30 }
					}
				}
				leader = {
					remove_trait = att_trait_siege_lv2
					add_trait = att_trait_siege_lv3
					set_timed_leader_flag = { flag = att_admiral_siege_levelup_end days = 360 }
				}
			}
			break = yes
		}
		IF = {
			limit = {
				leader = {
					has_trait = att_trait_siege_lv3
				}
			}
			random_list = {
				70 = {
					leader = {
						change_variable = { which = att_admiral_siege_exp value = 0.2 }
					}				
				}
				1 = { 
					leader = {
						remove_trait = att_trait_siege_lv3
						add_trait = att_trait_siege_lv4
						set_timed_leader_flag = { flag = att_admiral_siege_levelup_end days = 720 }
					}
				}
			}
			if = {
				limit = {
					leader = {
						check_variable = { which = att_admiral_siege_exp value > 35 }
					}
				}
				leader = {
					remove_trait = att_trait_siege_lv3
					add_trait = att_trait_siege_lv4
					set_timed_leader_flag = { flag = att_admiral_siege_levelup_end days = 360 }
				}
			}
			break = yes
		}
		IF = {
			limit = {
				leader = {
					has_trait = att_trait_siege_lv4
				}
			}
			random_list = {
				100 = {
					leader = {
						change_variable = { which = att_admiral_siege_exp value = 0.2 }
					}				
				}
				1 = { 
					leader = {
						remove_trait = att_trait_siege_lv4
						add_trait = att_trait_siege_lv5
						set_timed_leader_flag = { flag = att_admiral_siege_levelup_end days = 1080 }
					}
				}
			}
			if = {
				limit = {
					leader = {
						check_variable = { which = att_admiral_siege_exp value > 50 }
					}
				}
				leader = {
					remove_trait = att_trait_siege_lv4
					add_trait = att_trait_siege_lv5
					set_timed_leader_flag = { flag = att_admiral_siege_levelup_end days = 360 }
				}
			}
			break = yes
		}
		IF = {
			limit = {
				leader = {
					has_trait = att_trait_siege_lv5
				}
			}
			random_list = {
				149 = {
					leader = {
						change_variable = { which = att_admiral_siege_exp value = 0.2 }
					}				
				}
				1 = { 
					leader = {
						remove_trait = att_trait_siege_lv5
						add_trait = att_trait_siege_max
						set_timed_leader_flag = { flag = att_admiral_siege_levelup_end days = 1080 }
					}
				}
			}
			if = {
				limit = {
					leader = {
						check_variable = { which = att_admiral_siege_exp value > 100 }
					}
				}
				leader = {
					remove_trait = att_trait_siege_lv5
					add_trait = att_trait_siege_max
					set_timed_leader_flag = { flag = att_admiral_siege_levelup_end days = 360 }
				}
			}
			break = yes
		}
	}
}

###Siege debuff###
fleet_event = {
	id = als.60
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
#		from = {
#			NOR = {
#				has_modifier = als_bombardment_debuff_lv1
#				has_modifier = als_bombardment_debuff_lv2
#				has_modifier = als_bombardment_debuff_lv3
#				has_modifier = als_bombardment_debuff_lv4
#				has_modifier = als_bombardment_debuff_lv5
#				has_modifier = als_bombardment_debuff_max
#			}
#		}
		exists = leader
		leader = {
			leader_class = admiral
			OR = { 
				has_trait = att_trait_siege_lv0
				has_trait = att_trait_siege_lv1
				has_trait = att_trait_siege_lv2
				has_trait = att_trait_siege_lv3
				has_trait = att_trait_siege_lv4
				has_trait = att_trait_siege_lv5
				has_trait = att_trait_siege_max
			}
		}
	}
	
	
	immediate = {
		print_scope_effect = yes	
		if = {
			limit = {
				from = {
					has_orbital_bombardment = yes
				}		
			}
			set_timed_fleet_flag = { flag = att_siege_ongoing days = 360 }
			if = {
				limit = {
					exists = leader
					leader = {
						leader_class = admiral
						has_trait = att_trait_siege_max
					}
				}
				from = {
					remove_modifier = "als_bombardment_debuff_lv1"
					remove_modifier = "als_bombardment_debuff_lv2"
					remove_modifier = "als_bombardment_debuff_lv3"
					remove_modifier = "als_bombardment_debuff_lv4"
					remove_modifier = "als_bombardment_debuff_lv5"
					remove_modifier = "als_bombardment_debuff_max"
					add_modifier = {
						modifier = "als_bombardment_debuff_max"
						days = -1
					}
				}
			}
			if = {
				limit = {
					exists = leader
					leader = {
						leader_class = admiral
						has_trait = att_trait_siege_lv5
					}
					from = {
						NOT = {
							has_modifier = als_bombardment_debuff_max
						}					
					}
				}
				from = {
					remove_modifier = "als_bombardment_debuff_lv1"
					remove_modifier = "als_bombardment_debuff_lv2"
					remove_modifier = "als_bombardment_debuff_lv3"
					remove_modifier = "als_bombardment_debuff_lv4"
					remove_modifier = "als_bombardment_debuff_lv5"
					add_modifier = {
						modifier = "als_bombardment_debuff_lv5"
						days = -1
					}
				}
			}
			if = {
				limit = {
					exists = leader
					leader = {
						leader_class = admiral
						has_trait = att_trait_siege_lv4
					}
					from = {
						NOR = {
							has_modifier = als_bombardment_debuff_lv5
							has_modifier = als_bombardment_debuff_max
						}					
					}
				}
				from = {
					remove_modifier = "als_bombardment_debuff_lv1"
					remove_modifier = "als_bombardment_debuff_lv2"
					remove_modifier = "als_bombardment_debuff_lv3"
					remove_modifier = "als_bombardment_debuff_lv4"
					add_modifier = {
						modifier = "als_bombardment_debuff_lv4"
						days = -1
					}
				}
			}
			if = {
				limit = {
					exists = leader
					leader = {
						leader_class = admiral
						has_trait = att_trait_siege_lv3
					}
					from = {
						NOR = {
							has_modifier = als_bombardment_debuff_lv4
							has_modifier = als_bombardment_debuff_lv5
							has_modifier = als_bombardment_debuff_max
						}					
					}
				}
				from = {
					remove_modifier = "als_bombardment_debuff_lv1"
					remove_modifier = "als_bombardment_debuff_lv2"
					remove_modifier = "als_bombardment_debuff_lv3"
					add_modifier = {
						modifier = "als_bombardment_debuff_lv3"
						days = -1
					}
				}
			}
			if = {
				limit = {
					exists = leader
					leader = {
						leader_class = admiral
						has_trait = att_trait_siege_lv2
					}
					from = {
						NOR = {
							has_modifier = als_bombardment_debuff_lv3
							has_modifier = als_bombardment_debuff_lv4
							has_modifier = als_bombardment_debuff_lv5
							has_modifier = als_bombardment_debuff_max
						}					
					}
				}
				from = {
					remove_modifier = "als_bombardment_debuff_lv1"
					remove_modifier = "als_bombardment_debuff_lv2"
					add_modifier = {
						modifier = "als_bombardment_debuff_lv2"
						days = -1
					}
				}
			}
			if = {
				limit = {
					exists = leader
					leader = {
						leader_class = admiral
						has_trait = att_trait_siege_lv1
					}
					from = {
						NOR = {
							has_modifier = als_bombardment_debuff_lv2
							has_modifier = als_bombardment_debuff_lv3
							has_modifier = als_bombardment_debuff_lv4
							has_modifier = als_bombardment_debuff_lv5
							has_modifier = als_bombardment_debuff_max
						}					
					}
				}
				from = {
					remove_modifier = "als_bombardment_debuff_lv1"
					add_modifier = {
						modifier = "als_bombardment_debuff_lv1"
						days = -1
					}
				}
			}
		}
	}
}

event = {
	id = als.61
	hide_window = yes
	is_triggered_only = yes
	
	immediate = {
		every_planet = {
			limit = {
				has_orbital_bombardment = no
				OR = {
					has_modifier = als_bombardment_debuff_lv1
					has_modifier = als_bombardment_debuff_lv2
					has_modifier = als_bombardment_debuff_lv3
					has_modifier = als_bombardment_debuff_lv4
					has_modifier = als_bombardment_debuff_lv5
					has_modifier = als_bombardment_debuff_max
				}
			}
			remove_modifier = als_bombardment_debuff_lv1
			remove_modifier = als_bombardment_debuff_lv2
			remove_modifier = als_bombardment_debuff_lv3
			remove_modifier = als_bombardment_debuff_lv4
			remove_modifier = als_bombardment_debuff_lv5
			remove_modifier = als_bombardment_debuff_max
		}
	}
}