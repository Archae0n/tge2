# by cbshing
#	Example:
#
#	example_effect = {
#		add_energy = -100
#	}
#
#
#	In a script file:
#
#	effect = {
#		example_effect = yes
#	}
#

match_cbshing_lost_colony_to_origin_homeworld = { #Selectively resets necessary tiles for Machine World Civic users. Is triggered after "generate_start_buildings_and_blockers" by cbshing_origins_machine_world_start.1
	species = {
		save_event_target_as = lost_colony_origin_species

		create_species = {
			is_mod = yes
			name = this
			plural = this
			class = this
			portrait = this
			traits = this
			homeworld = this
		}
	}

	owner = {
		every_owned_pop = {
			limit = { is_same_species = event_target:lost_colony_origin_species }
			change_species = last_created
		}
		every_owned_leader = {
			limit = { is_same_species = event_target:lost_colony_origin_species }
			change_species = last_created
		}
		every_pool_leader = {
			limit = { is_same_species = event_target:lost_colony_origin_species }
			change_species = last_created
		}
		every_owned_army = {
			limit = {
				exists = species
				is_same_species = event_target:lost_colony_origin_species
			}
			change_species = last_created
		}
		every_owned_ship = {
			limit = {
				is_ship_class = shipclass_colonizer
				is_same_species = event_target:lost_colony_origin_species
			}
			change_species = last_created
		}
	}
}

# Given a species, change the planet type to match their preference
# Can copy this effect and add other planet types to it
# Scope: Planet
cbshing_origins_change_planet_type_to_match_preference_vanilla = {
	if = {
		limit = {
			last_created_pop = { has_trait = trait_pc_nuked_preference }
		}
		change_pc = pc_nuked
	}
	if = {
		limit = {
			last_created_pop = { has_trait = trait_pc_desert_preference }
		}
		change_pc = pc_desert
	}
	if = {
		limit = {
			last_created_pop = { has_trait = trait_pc_arid_preference }
		}
		change_pc = pc_arid
	}
	if = {
		limit = {
			last_created_pop = { has_trait = trait_pc_savannah_preference }
		}
		change_pc = pc_savannah
	}
	if = {
		limit = {
			last_created_pop = { has_trait = trait_pc_tropical_preference }
		}
		change_pc = pc_tropical
	}
	if = {
		limit = {
			last_created_pop = { has_trait = trait_pc_ocean_preference }
		}
		change_pc = pc_ocean
	}
	if = {
		limit = {
			last_created_pop = { has_trait = trait_pc_arctic_preference }
		}
		change_pc = pc_arctic
	}
	if = {
		limit = {
			last_created_pop = { has_trait = trait_pc_tundra_preference }
		}
		change_pc = pc_tundra
	}
	if = {
		limit = {
			last_created_pop = { has_trait = trait_pc_alpine_preference }
		}
		change_pc = pc_alpine
	}
	if = {
		limit = {
			last_created_pop = { has_trait = trait_pc_continental_preference }
		}
		change_pc = pc_continental
	}
	if = {
		limit = {
			last_created_pop = { has_trait = trait_pc_ai_preference }
		}
		change_pc = pc_ai
	}
	if = {
		limit = {
			last_created_pop = { has_trait = trait_pc_gaia_preference }
		}
		change_pc = pc_gaia
	}
	if = {
		limit = {
			last_created_pop = { has_trait = trait_pc_ringworld_habitable_preference }
		}
		change_pc = pc_gaia
	}
	if = {
		limit = {
			last_created_pop = { has_trait = trait_pc_habitat_preference }
		}
		change_pc = pc_gaia
	}
	if = {
		limit = {
			last_created_pop = { has_trait = trait_pc_machine_preference }
		}
		change_pc = pc_gaia
	}
}	